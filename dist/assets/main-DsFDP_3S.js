var so=Object.defineProperty;var fr=t=>{throw TypeError(t)};var ao=(t,e,n)=>e in t?so(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Yn=(t,e,n)=>ao(t,typeof e!="symbol"?e+"":e,n),na=(t,e,n)=>e.has(t)||fr("Cannot "+n);var ne=(t,e,n)=>(na(t,e,"read from private field"),n?n.call(t):e.get(t)),Ue=(t,e,n)=>e.has(t)?fr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ot=(t,e,n,s)=>(na(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),fn=(t,e,n)=>(na(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();const Pr=!1;var Bn=Array.isArray,ro=Array.prototype.indexOf,Ea=Array.from,ua=Object.defineProperty,hn=Object.getOwnPropertyDescriptor,Mr=Object.getOwnPropertyDescriptors,io=Object.prototype,oo=Array.prototype,xa=Object.getPrototypeOf,dr=Object.isExtensible;function lo(t){return t()}function fa(t){for(var e=0;e<t.length;e++)t[e]()}function co(){var t,e,n=new Promise((s,a)=>{t=s,e=a});return{promise:n,resolve:t,reject:e}}function Br(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const n=[];for(const s of t)if(n.push(s),n.length===e)break;return n}const Ze=2,Ca=4,Bs=8,fs=16,Ut=32,yn=64,Ir=128,dt=256,Rs=512,Ce=1024,vt=2048,Vt=4096,kt=8192,bn=16384,Ta=32768,Sa=65536,vr=1<<17,uo=1<<18,Ra=1<<19,Aa=1<<20,da=1<<21,Oa=1<<22,pn=1<<23,tn=Symbol("$state"),fo=Symbol("legacy props"),vo=Symbol(""),Na=new class extends Error{constructor(){super(...arguments);Yn(this,"name","StaleReactionError");Yn(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function ho(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function La(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function po(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function go(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function mo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function _o(t){throw new Error("https://svelte.dev/e/effect_orphan")}function yo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function bo(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function ko(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function wo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function qo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const Is=1,$s=2,$r=4,Eo=8,xo=16,Co=1,To=2,So=4,Ro=8,Ao=16,Oo=1,No=2,qe=Symbol(),Lo="http://www.w3.org/1999/xhtml";function Po(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}let Mo=!1;function Dr(t){return t===this.v}function Bo(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function jr(t){return!Bo(t,this.v)}let In=!1,Io=!1;function $o(){In=!0}let ue=null;function As(t){ue=t}function Lt(t,e=!1,n){ue={p:ue,c:null,e:null,s:t,x:null,l:In&&!e?{s:null,u:null,$:[]}:null}}function Pt(t){var e=ue,n=e.e;if(n!==null){e.e=null;for(var s of n)ei(s)}return t!==void 0&&(e.x=t),ue=e.p,t??{}}function $n(){return!In||ue!==null&&ue.l===null}const Do=new WeakMap;function jo(t){var e=X;if(e===null)return J.f|=pn,t;if((e.f&Ta)===0){if((e.f&Ir)===0)throw!e.parent&&t instanceof Error&&Fr(t),t;e.b.error(t)}else Pa(t,e)}function Pa(t,e){for(;e!==null;){if((e.f&Ir)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&Fr(t),t}function Fr(t){const e=Do.get(t);e&&(ua(t,"message",{value:e.message}),ua(t,"stack",{value:e.stack}))}let Os=[];function Fo(){var t=Os;Os=[],fa(t)}function Ma(t){Os.length===0&&queueMicrotask(Fo),Os.push(t)}function Uo(){for(var t=X.b;t!==null&&!t.has_pending_snippet();)t=t.parent;return t===null&&ho(),t}function ds(t){var e=Ze|vt,n=J!==null&&(J.f&Ze)!==0?J:null;return X===null||n!==null&&(n.f&dt)!==0?e|=dt:X.f|=Ra,{ctx:ue,deps:null,effects:null,equals:Dr,f:e,fn:t,reactions:null,rv:0,v:qe,wv:0,parent:n??X,ac:null}}function Vo(t,e){let n=X;n===null&&po();var s=n.b,a=void 0,i=as(qe),o=null,c=!J;return nl(()=>{try{var l=t()}catch(y){l=Promise.reject(y)}var v=()=>l;a=(o==null?void 0:o.then(v,v))??Promise.resolve(l),o=a;var d=oe,g=s.pending;c&&(s.update_pending_count(1),g||d.increment());const m=(y,p=void 0)=>{o=null,g||d.activate(),p?p!==Na&&(i.f|=pn,Mn(i,p)):((i.f&pn)!==0&&(i.f^=pn),Mn(i,y)),c&&(s.update_pending_count(-1),g||d.decrement()),Hr()};if(a.then(m,y=>m(null,y||"unknown")),d)return()=>{queueMicrotask(()=>d.neuter())}}),new Promise(l=>{function v(d){function g(){d===a?l(i):v(a)}d.then(g,g)}v(a)})}function Ur(t){const e=ds(t);return oi(e),e}function Ba(t){const e=ds(t);return e.equals=jr,e}function Vr(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)Ft(e[n])}}function zo(t){for(var e=t.parent;e!==null;){if((e.f&Ze)===0)return e;e=e.parent}return null}function Ia(t){var e,n=X;sn(zo(t));try{Vr(t),e=fi(t)}finally{sn(n)}return e}function zr(t){var e=Ia(t);if(t.equals(e)||(t.v=e,t.wv=ci()),!kn)if(Zt!==null)Zt.set(t,t.v);else{var n=(en||(t.f&dt)!==0)&&t.deps!==null?Vt:Ce;Me(t,n)}}function Ho(t,e,n){const s=$n()?ds:Ba;if(e.length===0){n(t.map(s));return}var a=oe,i=X,o=Go(),c=Uo();Promise.all(e.map(l=>Vo(l))).then(l=>{a==null||a.activate(),o();try{n([...t.map(s),...l])}catch(v){(i.f&bn)===0&&Pa(v,i)}a==null||a.deactivate(),Hr()}).catch(l=>{c.error(l)})}function Go(){var t=X,e=J,n=ue;return function(){sn(t),Ot(e),As(n)}}function Hr(){sn(null),Ot(null),As(null)}const Wn=new Set;let oe=null,qs=null,Zt=null,hr=new Set,Ns=[];function Gr(){const t=Ns.shift();Ns.length>0&&queueMicrotask(Gr),t()}let ns=[],$a=null,va=!1;var On,Nn,Xt,os,ls,dn,Ln,vn,Qt,Pn,cs,us,wt,Kr,Es,ha;const Ms=class Ms{constructor(){Ue(this,wt);Yn(this,"current",new Map);Ue(this,On,new Map);Ue(this,Nn,new Set);Ue(this,Xt,0);Ue(this,os,null);Ue(this,ls,!1);Ue(this,dn,[]);Ue(this,Ln,[]);Ue(this,vn,[]);Ue(this,Qt,[]);Ue(this,Pn,[]);Ue(this,cs,[]);Ue(this,us,[]);Yn(this,"skipped_effects",new Set)}process(e){var i;ns=[],qs=null;var n=null;if(Wn.size>1){n=new Map,Zt=new Map;for(const[o,c]of this.current)n.set(o,{v:o.v,wv:o.wv}),o.v=c;for(const o of Wn)if(o!==this)for(const[c,l]of ne(o,On))n.has(c)||(n.set(c,{v:c.v,wv:c.wv}),c.v=l)}for(const o of e)fn(this,wt,Kr).call(this,o);if(ne(this,dn).length===0&&ne(this,Xt)===0){fn(this,wt,ha).call(this);var s=ne(this,vn),a=ne(this,Qt);ot(this,vn,[]),ot(this,Qt,[]),ot(this,Pn,[]),qs=oe,oe=null,pr(s),pr(a),oe===null?oe=this:Wn.delete(this),(i=ne(this,os))==null||i.resolve()}else fn(this,wt,Es).call(this,ne(this,vn)),fn(this,wt,Es).call(this,ne(this,Qt)),fn(this,wt,Es).call(this,ne(this,Pn));if(n){for(const[o,{v:c,wv:l}]of n)o.wv<=l&&(o.v=c);Zt=null}for(const o of ne(this,dn))An(o);for(const o of ne(this,Ln))An(o);ot(this,dn,[]),ot(this,Ln,[])}capture(e,n){ne(this,On).has(e)||ne(this,On).set(e,n),this.current.set(e,e.v)}activate(){oe=this}deactivate(){oe=null,qs=null;for(const e of hr)if(hr.delete(e),e(),oe!==null)break}neuter(){ot(this,ls,!0)}flush(){ns.length>0?Ko():fn(this,wt,ha).call(this),oe===this&&(ne(this,Xt)===0&&Wn.delete(this),this.deactivate())}increment(){ot(this,Xt,ne(this,Xt)+1)}decrement(){if(ot(this,Xt,ne(this,Xt)-1),ne(this,Xt)===0){for(const e of ne(this,cs))Me(e,vt),_n(e);for(const e of ne(this,us))Me(e,Vt),_n(e);ot(this,vn,[]),ot(this,Qt,[]),this.flush()}else this.deactivate()}add_callback(e){ne(this,Nn).add(e)}settled(){return(ne(this,os)??ot(this,os,co())).promise}static ensure(){if(oe===null){const e=oe=new Ms;Wn.add(oe),Ms.enqueue(()=>{oe===e&&e.flush()})}return oe}static enqueue(e){Ns.length===0&&queueMicrotask(Gr),Ns.unshift(e)}};On=new WeakMap,Nn=new WeakMap,Xt=new WeakMap,os=new WeakMap,ls=new WeakMap,dn=new WeakMap,Ln=new WeakMap,vn=new WeakMap,Qt=new WeakMap,Pn=new WeakMap,cs=new WeakMap,us=new WeakMap,wt=new WeakSet,Kr=function(e){var d;e.f^=Ce;for(var n=e.first;n!==null;){var s=n.f,a=(s&(Ut|yn))!==0,i=a&&(s&Ce)!==0,o=i||(s&kt)!==0||this.skipped_effects.has(n);if(!o&&n.fn!==null){if(a)n.f^=Ce;else if((s&Ce)===0)if((s&Ca)!==0)ne(this,Qt).push(n);else if((s&Oa)!==0){var c=(d=n.b)!=null&&d.pending?ne(this,Ln):ne(this,dn);c.push(n)}else hs(n)&&((n.f&fs)!==0&&ne(this,Pn).push(n),An(n));var l=n.first;if(l!==null){n=l;continue}}var v=n.parent;for(n=n.next;n===null&&v!==null;)n=v.next,v=v.parent}},Es=function(e){for(const n of e)((n.f&vt)!==0?ne(this,cs):ne(this,us)).push(n),Me(n,Ce);e.length=0},ha=function(){if(!ne(this,ls))for(const e of ne(this,Nn))e();ne(this,Nn).clear()};let ss=Ms;function Ko(){var t=Rn;va=!0;try{var e=0;for(_r(!0);ns.length>0;){var n=ss.ensure();if(e++>1e3){var s,a;Yo()}n.process(ns),gn.clear()}}finally{va=!1,_r(t),$a=null}}function Yo(){try{yo()}catch(t){Pa(t,$a)}}function pr(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var s=t[n++];if((s.f&(bn|kt))===0&&hs(s)){var a=oe?oe.current.size:0;if(An(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?ai(s):s.fn=null),oe!==null&&oe.current.size>a&&(s.f&Aa)!==0)break}}for(;n<e;)_n(t[n++])}}function _n(t){for(var e=$a=t;e.parent!==null;){e=e.parent;var n=e.f;if(va&&e===X&&(n&fs)!==0)return;if((n&(yn|Ut))!==0){if((n&Ce)===0)return;e.f^=Ce}}ns.push(e)}const gn=new Map;function as(t,e){var n={f:0,v:t,reactions:null,equals:Dr,rv:0,wv:0};return n}function Yt(t,e){const n=as(t);return oi(n),n}function N(t,e=!1,n=!0){var a;const s=as(t);return e||(s.equals=jr),In&&n&&ue!==null&&ue.l!==null&&((a=ue.l).s??(a.s=[])).push(s),s}function Ve(t,e){return f(t,b(()=>r(t))),e}function f(t,e,n=!1){J!==null&&(!Rt||(J.f&vr)!==0)&&$n()&&(J.f&(Ze|fs|Oa|vr))!==0&&!(Pe!=null&&Pe.includes(t))&&qo();let s=n?Sn(e):e;return Mn(t,s)}function Mn(t,e){if(!t.equals(e)){var n=t.v;kn?gn.set(t,e):gn.set(t,n),t.v=e;var s=ss.ensure();s.capture(t,n),(t.f&Ze)!==0&&((t.f&vt)!==0&&Ia(t),Me(t,(t.f&dt)===0?Ce:Vt)),t.wv=ci(),Yr(t,vt),$n()&&X!==null&&(X.f&Ce)!==0&&(X.f&(Ut|yn))===0&&(ct===null?il([t]):ct.push(t))}return e}function sa(t){f(t,t.v+1)}function Yr(t,e){var n=t.reactions;if(n!==null)for(var s=$n(),a=n.length,i=0;i<a;i++){var o=n[i],c=o.f;if(!(!s&&o===X)){var l=(c&vt)===0;l&&Me(o,e),(c&Ze)!==0?Yr(o,Vt):l&&_n(o)}}}function Sn(t){if(typeof t!="object"||t===null||tn in t)return t;const e=xa(t);if(e!==io&&e!==oo)return t;var n=new Map,s=Bn(t),a=Yt(0),i=mn,o=c=>{if(mn===i)return c();var l=J,v=mn;Ot(null),br(i);var d=c();return Ot(l),br(v),d};return s&&n.set("length",Yt(t.length)),new Proxy(t,{defineProperty(c,l,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&ko();var d=n.get(l);return d===void 0?d=o(()=>{var g=Yt(v.value);return n.set(l,g),g}):f(d,v.value,!0),!0},deleteProperty(c,l){var v=n.get(l);if(v===void 0){if(l in c){const d=o(()=>Yt(qe));n.set(l,d),sa(a)}}else f(v,qe),sa(a);return!0},get(c,l,v){var y;if(l===tn)return t;var d=n.get(l),g=l in c;if(d===void 0&&(!g||(y=hn(c,l))!=null&&y.writable)&&(d=o(()=>{var p=Sn(g?c[l]:qe),k=Yt(p);return k}),n.set(l,d)),d!==void 0){var m=r(d);return m===qe?void 0:m}return Reflect.get(c,l,v)},getOwnPropertyDescriptor(c,l){var v=Reflect.getOwnPropertyDescriptor(c,l);if(v&&"value"in v){var d=n.get(l);d&&(v.value=r(d))}else if(v===void 0){var g=n.get(l),m=g==null?void 0:g.v;if(g!==void 0&&m!==qe)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return v},has(c,l){var m;if(l===tn)return!0;var v=n.get(l),d=v!==void 0&&v.v!==qe||Reflect.has(c,l);if(v!==void 0||X!==null&&(!d||(m=hn(c,l))!=null&&m.writable)){v===void 0&&(v=o(()=>{var y=d?Sn(c[l]):qe,p=Yt(y);return p}),n.set(l,v));var g=r(v);if(g===qe)return!1}return d},set(c,l,v,d){var A;var g=n.get(l),m=l in c;if(s&&l==="length")for(var y=v;y<g.v;y+=1){var p=n.get(y+"");p!==void 0?f(p,qe):y in c&&(p=o(()=>Yt(qe)),n.set(y+"",p))}if(g===void 0)(!m||(A=hn(c,l))!=null&&A.writable)&&(g=o(()=>Yt(void 0)),f(g,Sn(v)),n.set(l,g));else{m=g.v!==qe;var k=o(()=>Sn(v));f(g,k)}var S=Reflect.getOwnPropertyDescriptor(c,l);if(S!=null&&S.set&&S.set.call(d,v),!m){if(s&&typeof l=="string"){var L=n.get("length"),R=Number(l);Number.isInteger(R)&&R>=L.v&&f(L,R+1)}sa(a)}return!0},ownKeys(c){r(a);var l=Reflect.ownKeys(c).filter(g=>{var m=n.get(g);return m===void 0||m.v!==qe});for(var[v,d]of n)d.v!==qe&&!(v in c)&&l.push(v);return l},setPrototypeOf(){wo()}})}function gr(t){try{if(t!==null&&typeof t=="object"&&tn in t)return t[tn]}catch{}return t}function Wo(t,e){return Object.is(gr(t),gr(e))}var mr,Wr,Jr,Xr;function Jo(){if(mr===void 0){mr=window,Wr=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;Jr=hn(e,"firstChild").get,Xr=hn(e,"nextSibling").get,dr(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),dr(n)&&(n.__t=void 0)}}function vs(t=""){return document.createTextNode(t)}function Ls(t){return Jr.call(t)}function Ds(t){return Xr.call(t)}function u(t,e){return Ls(t)}function ut(t,e){{var n=Ls(t);return n instanceof Comment&&n.data===""?Ds(n):n}}function h(t,e=1,n=!1){let s=t;for(;e--;)s=Ds(s);return s}function Xo(t){t.textContent=""}function Qr(){return!1}function Zr(t){X===null&&J===null&&_o(),J!==null&&(J.f&dt)!==0&&X===null&&mo(),kn&&go()}function Qo(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Mt(t,e,n,s=!0){var a=X;a!==null&&(a.f&kt)!==0&&(t|=kt);var i={ctx:ue,deps:null,nodes_start:null,nodes_end:null,f:t|vt,first:null,fn:e,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{An(i),i.f|=Ta}catch(l){throw Ft(i),l}else e!==null&&_n(i);var o=n&&i.deps===null&&i.first===null&&i.nodes_start===null&&i.teardown===null&&(i.f&Ra)===0;if(!o&&s&&(a!==null&&Qo(i,a),J!==null&&(J.f&Ze)!==0&&(t&yn)===0)){var c=J;(c.effects??(c.effects=[])).push(i)}return i}function Da(t){const e=Mt(Bs,null,!1);return Me(e,Ce),e.teardown=t,e}function pa(t){Zr();var e=X.f,n=!J&&(e&Ut)!==0&&(e&Ta)===0;if(n){var s=ue;(s.e??(s.e=[])).push(t)}else return ei(t)}function ei(t){return Mt(Ca|Aa,t,!1)}function Zo(t){return Zr(),Mt(Bs|Aa,t,!0)}function el(t){ss.ensure();const e=Mt(yn,t,!0);return(n={})=>new Promise(s=>{n.outro?Fa(e,()=>{Ft(e),s(void 0)}):(Ft(e),s(void 0))})}function tl(t){return Mt(Ca,t,!1)}function St(t,e){var n=ue,s={effect:null,ran:!1,deps:t};n.l.$.push(s),s.effect=ja(()=>{t(),!s.ran&&(s.ran=!0,b(e))})}function js(){var t=ue;ja(()=>{for(var e of t.l.$){e.deps();var n=e.effect;(n.f&Ce)!==0&&Me(n,Vt),hs(n)&&An(n),e.ran=!1}})}function nl(t){return Mt(Oa|Ra,t,!0)}function ja(t,e=0){return Mt(Bs|e,t,!0)}function F(t,e=[],n=[]){Ho(e,n,s=>{Mt(Bs,()=>t(...s.map(r)),!0)})}function ti(t,e=0){var n=Mt(fs|e,t,!0);return n}function rs(t,e=!0){return Mt(Ut,t,!0,e)}function ni(t){var e=t.teardown;if(e!==null){const n=kn,s=J;yr(!0),Ot(null);try{e.call(null)}finally{yr(n),Ot(s)}}}function si(t,e=!1){var a;var n=t.first;for(t.first=t.last=null;n!==null;){(a=n.ac)==null||a.abort(Na);var s=n.next;(n.f&yn)!==0?n.parent=null:Ft(n,e),n=s}}function sl(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Ut)===0&&Ft(e),e=n}}function Ft(t,e=!0){var n=!1;(e||(t.f&uo)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(al(t.nodes_start,t.nodes_end),n=!0),si(t,e&&!n),Ps(t,0),Me(t,bn);var s=t.transitions;if(s!==null)for(const i of s)i.stop();ni(t);var a=t.parent;a!==null&&a.first!==null&&ai(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function al(t,e){for(;t!==null;){var n=t===e?null:Ds(t);t.remove(),t=n}}function ai(t){var e=t.parent,n=t.prev,s=t.next;n!==null&&(n.next=s),s!==null&&(s.prev=n),e!==null&&(e.first===t&&(e.first=s),e.last===t&&(e.last=n))}function Fa(t,e){var n=[];Ua(t,n,!0),ri(n,()=>{Ft(t),e&&e()})}function ri(t,e){var n=t.length;if(n>0){var s=()=>--n||e();for(var a of t)a.out(s)}else e()}function Ua(t,e,n){if((t.f&kt)===0){if(t.f^=kt,t.transitions!==null)for(const o of t.transitions)(o.is_global||n)&&e.push(o);for(var s=t.first;s!==null;){var a=s.next,i=(s.f&Sa)!==0||(s.f&Ut)!==0;Ua(s,e,i?n:!1),s=a}}}function Va(t){ii(t,!0)}function ii(t,e){if((t.f&kt)!==0){t.f^=kt,(t.f&Ce)===0&&(Me(t,vt),_n(t));for(var n=t.first;n!==null;){var s=n.next,a=(n.f&Sa)!==0||(n.f&Ut)!==0;ii(n,a?e:!1),n=s}if(t.transitions!==null)for(const i of t.transitions)(i.is_global||e)&&i.in()}}let Jt=null;function rl(t){var e=Jt;try{if(Jt=new Set,b(t),e!==null)for(var n of Jt)e.add(n);return Jt}finally{Jt=e}}function Xn(t){for(var e of rl(t))Mn(e,e.v)}let Rn=!1;function _r(t){Rn=t}let kn=!1;function yr(t){kn=t}let J=null,Rt=!1;function Ot(t){J=t}let X=null;function sn(t){X=t}let Pe=null;function oi(t){J!==null&&(Pe===null?Pe=[t]:Pe.push(t))}let Le=null,Qe=0,ct=null;function il(t){ct=t}let li=1,is=0,mn=is;function br(t){mn=t}let en=!1;function ci(){return++li}function hs(t){var g;var e=t.f;if((e&vt)!==0)return!0;if((e&Vt)!==0){var n=t.deps,s=(e&dt)!==0;if(n!==null){var a,i,o=(e&Rs)!==0,c=s&&X!==null&&!en,l=n.length;if((o||c)&&(X===null||(X.f&bn)===0)){var v=t,d=v.parent;for(a=0;a<l;a++)i=n[a],(o||!((g=i==null?void 0:i.reactions)!=null&&g.includes(v)))&&(i.reactions??(i.reactions=[])).push(v);o&&(v.f^=Rs),c&&d!==null&&(d.f&dt)===0&&(v.f^=dt)}for(a=0;a<l;a++)if(i=n[a],hs(i)&&zr(i),i.wv>t.wv)return!0}(!s||X!==null&&!en)&&Me(t,Ce)}return!1}function ui(t,e,n=!0){var s=t.reactions;if(s!==null&&!(Pe!=null&&Pe.includes(t)))for(var a=0;a<s.length;a++){var i=s[a];(i.f&Ze)!==0?ui(i,e,!1):e===i&&(n?Me(i,vt):(i.f&Ce)!==0&&Me(i,Vt),_n(i))}}function fi(t){var p;var e=Le,n=Qe,s=ct,a=J,i=en,o=Pe,c=ue,l=Rt,v=mn,d=t.f;Le=null,Qe=0,ct=null,en=(d&dt)!==0&&(Rt||!Rn||J===null),J=(d&(Ut|yn))===0?t:null,Pe=null,As(t.ctx),Rt=!1,mn=++is,t.ac!==null&&(t.ac.abort(Na),t.ac=null);try{t.f|=da;var g=(0,t.fn)(),m=t.deps;if(Le!==null){var y;if(Ps(t,Qe),m!==null&&Qe>0)for(m.length=Qe+Le.length,y=0;y<Le.length;y++)m[Qe+y]=Le[y];else t.deps=m=Le;if(!en||(d&Ze)!==0&&t.reactions!==null)for(y=Qe;y<m.length;y++)((p=m[y]).reactions??(p.reactions=[])).push(t)}else m!==null&&Qe<m.length&&(Ps(t,Qe),m.length=Qe);if($n()&&ct!==null&&!Rt&&m!==null&&(t.f&(Ze|Vt|vt))===0)for(y=0;y<ct.length;y++)ui(ct[y],t);return a!==null&&a!==t&&(is++,ct!==null&&(s===null?s=ct:s.push(...ct))),(t.f&pn)!==0&&(t.f^=pn),g}catch(k){return jo(k)}finally{t.f^=da,Le=e,Qe=n,ct=s,J=a,en=i,Pe=o,As(c),Rt=l,mn=v}}function ol(t,e){let n=e.reactions;if(n!==null){var s=ro.call(n,t);if(s!==-1){var a=n.length-1;a===0?n=e.reactions=null:(n[s]=n[a],n.pop())}}n===null&&(e.f&Ze)!==0&&(Le===null||!Le.includes(e))&&(Me(e,Vt),(e.f&(dt|Rs))===0&&(e.f^=Rs),Vr(e),Ps(e,0))}function Ps(t,e){var n=t.deps;if(n!==null)for(var s=e;s<n.length;s++)ol(t,n[s])}function An(t){var e=t.f;if((e&bn)===0){Me(t,Ce);var n=X,s=Rn;X=t,Rn=!0;try{(e&fs)!==0?sl(t):si(t),ni(t);var a=fi(t);t.teardown=typeof a=="function"?a:null,t.wv=li;var i;Pr&&Io&&(t.f&vt)!==0&&t.deps}finally{Rn=s,X=n}}}function r(t){var e=t.f,n=(e&Ze)!==0;if(Jt==null||Jt.add(t),J!==null&&!Rt){var s=X!==null&&(X.f&bn)!==0;if(!s&&!(Pe!=null&&Pe.includes(t))){var a=J.deps;if((J.f&da)!==0)t.rv<is&&(t.rv=is,Le===null&&a!==null&&a[Qe]===t?Qe++:Le===null?Le=[t]:(!en||!Le.includes(t))&&Le.push(t));else{(J.deps??(J.deps=[])).push(t);var i=t.reactions;i===null?t.reactions=[J]:i.includes(J)||i.push(J)}}}else if(n&&t.deps===null&&t.effects===null){var o=t,c=o.parent;c!==null&&(c.f&dt)===0&&(o.f^=dt)}if(kn){if(gn.has(t))return gn.get(t);if(n){o=t;var l=o.v;return((o.f&Ce)===0&&o.reactions!==null||di(o))&&(l=Ia(o)),gn.set(o,l),l}}else if(n){if(o=t,Zt!=null&&Zt.has(o))return Zt.get(o);hs(o)&&zr(o)}if((t.f&pn)!==0)throw t.v;return t.v}function di(t){if(t.v===qe)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(gn.has(e)||(e.f&Ze)!==0&&di(e))return!0;return!1}function b(t){var e=Rt;try{return Rt=!0,t()}finally{Rt=e}}const ll=-7169;function Me(t,e){t.f=t.f&ll|e}function me(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(tn in t)ga(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&tn in n&&ga(n)}}}function ga(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let s in t)try{ga(t[s],e)}catch{}const n=xa(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const s=Mr(n);for(let a in s){const i=s[a].get;if(i)try{i.call(t)}catch{}}}}}const cl=["touchstart","touchmove"];function ul(t){return cl.includes(t)}function fl(t,e){{const n=document.body;t.autofocus=!0,Ma(()=>{document.activeElement===n&&t.focus()})}}let kr=!1;function dl(){kr||(kr=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const n of t.target.elements)(e=n.__on_r)==null||e.call(n)})},{capture:!0}))}function vi(t){var e=J,n=X;Ot(null),sn(null);try{return t()}finally{Ot(e),sn(n)}}function hi(t,e,n,s=n){t.addEventListener(e,()=>vi(n));const a=t.__on_r;a?t.__on_r=()=>{a(),s(!0)}:t.__on_r=()=>s(!0),dl()}const vl=new Set,wr=new Set;function hl(t,e,n,s={}){function a(i){if(s.capture||Qn.call(e,i),!i.cancelBubble)return vi(()=>n==null?void 0:n.call(this,i))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Ma(()=>{e.addEventListener(t,a,s)}):e.addEventListener(t,a,s),a}function E(t,e,n,s,a){var i={capture:s,passive:a},o=hl(t,e,n,i);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Da(()=>{e.removeEventListener(t,o,i)})}let qr=null;function Qn(t){var R;var e=this,n=e.ownerDocument,s=t.type,a=((R=t.composedPath)==null?void 0:R.call(t))||[],i=a[0]||t.target;qr=t;var o=0,c=qr===t&&t.__root;if(c){var l=a.indexOf(c);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var v=a.indexOf(e);if(v===-1)return;l<=v&&(o=l)}if(i=a[o]||t.target,i!==e){ua(t,"currentTarget",{configurable:!0,get(){return i||n}});var d=J,g=X;Ot(null),sn(null);try{for(var m,y=[];i!==null;){var p=i.assignedSlot||i.parentNode||i.host||null;try{var k=i["__"+s];if(k!=null&&(!i.disabled||t.target===i))if(Bn(k)){var[S,...L]=k;S.apply(i,[t,...L])}else k.call(i,t)}catch(A){m?y.push(A):m=A}if(t.cancelBubble||p===e||p===null)break;i=p}if(m){for(let A of y)queueMicrotask(()=>{throw A});throw m}}finally{t.__root=e,delete t.currentTarget,Ot(d),sn(g)}}}function pl(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function ma(t,e){var n=X;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function x(t,e){var n=(e&Oo)!==0,s=(e&No)!==0,a,i=!t.startsWith("<!>");return()=>{a===void 0&&(a=pl(i?t:"<!>"+t),n||(a=Ls(a)));var o=s||Wr?document.importNode(a,!0):a.cloneNode(!0);if(n){var c=Ls(o),l=o.lastChild;ma(c,l)}else ma(o,o);return o}}function jt(){var t=document.createDocumentFragment(),e=document.createComment(""),n=vs();return t.append(e,n),ma(e,n),t}function w(t,e){t!==null&&t.before(e)}function D(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function gl(t,e){return ml(t,e)}const Tn=new Map;function ml(t,{target:e,anchor:n,props:s={},events:a,context:i,intro:o=!0}){Jo();var c=new Set,l=g=>{for(var m=0;m<g.length;m++){var y=g[m];if(!c.has(y)){c.add(y);var p=ul(y);e.addEventListener(y,Qn,{passive:p});var k=Tn.get(y);k===void 0?(document.addEventListener(y,Qn,{passive:p}),Tn.set(y,1)):Tn.set(y,k+1)}}};l(Ea(vl)),wr.add(l);var v=void 0,d=el(()=>{var g=n??e.appendChild(vs());return rs(()=>{if(i){Lt({});var m=ue;m.c=i}a&&(s.$$events=a),v=t(g,s)||{},i&&Pt()}),()=>{var p;for(var m of c){e.removeEventListener(m,Qn);var y=Tn.get(m);--y===0?(document.removeEventListener(m,Qn),Tn.delete(m)):Tn.set(m,y)}wr.delete(l),g!==n&&((p=g.parentNode)==null||p.removeChild(g))}});return _l.set(v,d),v}let _l=new WeakMap;function te(t,e,n=!1){var s=t,a=null,i=null,o=qe,c=n?Sa:0,l=!1;const v=(y,p=!0)=>{l=!0,m(p,y)};var d=null;function g(){d!==null&&(d.lastChild.remove(),s.before(d),d=null);var y=o?a:i,p=o?i:a;y&&Va(y),p&&Fa(p,()=>{o?i=null:a=null})}const m=(y,p)=>{if(o!==(o=y)){var k=Qr(),S=s;if(k&&(d=document.createDocumentFragment(),d.append(S=vs())),o?a??(a=p&&rs(()=>p(S))):i??(i=p&&rs(()=>p(S))),k){var L=oe,R=o?a:i,A=o?i:a;R&&L.skipped_effects.delete(R),A&&L.skipped_effects.add(A),L.add_callback(g)}else g()}};ti(()=>{l=!1,e(v),l||m(null,null)},c)}function Ee(t,e){return e}function yl(t,e,n){for(var s=t.items,a=[],i=e.length,o=0;o<i;o++)Ua(e[o].e,a,!0);var c=i>0&&a.length===0&&n!==null;if(c){var l=n.parentNode;Xo(l),l.append(n),s.clear(),Tt(t,e[0].prev,e[i-1].next)}ri(a,()=>{for(var v=0;v<i;v++){var d=e[v];c||(s.delete(d.k),Tt(t,d.prev,d.next)),Ft(d.e,!c)}})}function xe(t,e,n,s,a,i=null){var o=t,c={flags:e,items:new Map,first:null},l=(e&$r)!==0;if(l){var v=t;o=v.appendChild(vs())}var d=null,g=!1,m=new Map,y=Ba(()=>{var L=n();return Bn(L)?L:L==null?[]:Ea(L)}),p,k;function S(){bl(k,p,c,m,o,a,e,s,n),i!==null&&(p.length===0?d?Va(d):d=rs(()=>i(o)):d!==null&&Fa(d,()=>{d=null}))}ti(()=>{k??(k=X),p=r(y);var L=p.length;if(!(g&&L===0)){g=L===0;var R,A,B,U;if(Qr()){var P=new Set,$=oe;for(A=0;A<L;A+=1){B=p[A],U=s(B,A);var M=c.items.get(U)??m.get(U);M?(e&(Is|$s))!==0&&pi(M,B,A,e):(R=gi(null,c,null,null,B,U,A,a,e,n,!0),m.set(U,R)),P.add(U)}for(const[C,Q]of c.items)P.has(C)||$.skipped_effects.add(Q.e);$.add_callback(S)}else S();r(y)}})}function bl(t,e,n,s,a,i,o,c,l){var T,j,Y,ye;var v=(o&Eo)!==0,d=(o&(Is|$s))!==0,g=e.length,m=n.items,y=n.first,p=y,k,S=null,L,R=[],A=[],B,U,P,$;if(v)for($=0;$<g;$+=1)B=e[$],U=c(B,$),P=m.get(U),P!==void 0&&((T=P.a)==null||T.measure(),(L??(L=new Set)).add(P));for($=0;$<g;$+=1){if(B=e[$],U=c(B,$),P=m.get(U),P===void 0){var M=s.get(U);if(M!==void 0){s.delete(U),m.set(U,M);var C=S?S.next:p;Tt(n,S,M),Tt(n,M,C),aa(M,C,a),S=M}else{var Q=p?p.e.nodes_start:a;S=gi(Q,n,S,S===null?n.first:S.next,B,U,$,i,o,l)}m.set(U,S),R=[],A=[],p=S.next;continue}if(d&&pi(P,B,$,o),(P.e.f&kt)!==0&&(Va(P.e),v&&((j=P.a)==null||j.unfix(),(L??(L=new Set)).delete(P))),P!==p){if(k!==void 0&&k.has(P)){if(R.length<A.length){var H=A[0],K;S=H.prev;var z=R[0],ae=R[R.length-1];for(K=0;K<R.length;K+=1)aa(R[K],H,a);for(K=0;K<A.length;K+=1)k.delete(A[K]);Tt(n,z.prev,ae.next),Tt(n,S,z),Tt(n,ae,H),p=H,S=ae,$-=1,R=[],A=[]}else k.delete(P),aa(P,p,a),Tt(n,P.prev,P.next),Tt(n,P,S===null?n.first:S.next),Tt(n,S,P),S=P;continue}for(R=[],A=[];p!==null&&p.k!==U;)(p.e.f&kt)===0&&(k??(k=new Set)).add(p),A.push(p),p=p.next;if(p===null)continue;P=p}R.push(P),S=P,p=P.next}if(p!==null||k!==void 0){for(var le=k===void 0?[]:Ea(k);p!==null;)(p.e.f&kt)===0&&le.push(p),p=p.next;var se=le.length;if(se>0){var fe=(o&$r)!==0&&g===0?a:null;if(v){for($=0;$<se;$+=1)(Y=le[$].a)==null||Y.measure();for($=0;$<se;$+=1)(ye=le[$].a)==null||ye.fix()}yl(n,le,fe)}}v&&Ma(()=>{var ge;if(L!==void 0)for(P of L)(ge=P.a)==null||ge.apply()}),t.first=n.first&&n.first.e,t.last=S&&S.e;for(var re of s.values())Ft(re.e);s.clear()}function pi(t,e,n,s){(s&Is)!==0&&Mn(t.v,e),(s&$s)!==0?Mn(t.i,n):t.i=n}function gi(t,e,n,s,a,i,o,c,l,v,d){var g=(l&Is)!==0,m=(l&xo)===0,y=g?m?N(a,!1,!1):as(a):a,p=(l&$s)===0?o:as(o),k={i:p,v:y,k:i,a:null,e:null,prev:n,next:s};try{if(t===null){var S=document.createDocumentFragment();S.append(t=vs())}return k.e=rs(()=>c(t,y,p,v),Mo),k.e.prev=n&&n.e,k.e.next=s&&s.e,n===null?d||(e.first=k):(n.next=k,n.e.next=k.e),s!==null&&(s.prev=k,s.e.prev=k.e),k}finally{}}function aa(t,e,n){for(var s=t.next?t.next.e.nodes_start:n,a=e?e.e.nodes_start:n,i=t.e.nodes_start;i!==null&&i!==s;){var o=Ds(i);a.before(i),i=o}}function Tt(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function kl(t,e,n,s,a){var c;var i=(c=e.$$slots)==null?void 0:c[n],o=!1;i===!0&&(i=e.children,o=!0),i===void 0?a!==null&&a(t):i(t,o?()=>s:s)}const Er=[...` 	
\r\f \v\uFEFF`];function wl(t,e,n){var s=t==null?"":""+t;if(n){for(var a in n)if(n[a])s=s?s+" "+a:a;else if(s.length)for(var i=a.length,o=0;(o=s.indexOf(a,o))>=0;){var c=o+i;(o===0||Er.includes(s[o-1]))&&(c===s.length||Er.includes(s[c]))?s=(o===0?"":s.substring(0,o))+s.substring(c+1):o=c}}return s===""?null:s}function ql(t,e){return t==null?null:String(t)}function Te(t,e,n,s,a,i){var o=t.__className;if(o!==n||o===void 0){var c=wl(n,s,i);c==null?t.removeAttribute("class"):t.className=c,t.__className=n}else if(i&&a!==i)for(var l in i){var v=!!i[l];(a==null||v!==!!a[l])&&t.classList.toggle(l,v)}return i}function xr(t,e,n,s){var a=t.__style;if(a!==e){var i=ql(e);i==null?t.removeAttribute("style"):t.style.cssText=i,t.__style=e}return s}function mi(t,e,n=!1){if(t.multiple){if(e==null)return;if(!Bn(e))return Po();for(var s of t.options)s.selected=e.includes(ts(s));return}for(s of t.options){var a=ts(s);if(Wo(a,e)){s.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function El(t){var e=new MutationObserver(()=>{mi(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Da(()=>{e.disconnect()})}function Zn(t,e,n=e){var s=!0;hi(t,"change",a=>{var i=a?"[selected]":":checked",o;if(t.multiple)o=[].map.call(t.querySelectorAll(i),ts);else{var c=t.querySelector(i)??t.querySelector("option:not([disabled])");o=c&&ts(c)}n(o)}),tl(()=>{var a=e();if(mi(t,a,s),s&&a===void 0){var i=t.querySelector(":checked");i!==null&&(a=ts(i),n(a))}t.__value=a,s=!1}),El(t)}function ts(t){return"__value"in t?t.__value:t.value}const xl=Symbol("is custom element"),Cl=Symbol("is html");function Wt(t,e,n,s){var a=Tl(t);a[e]!==(a[e]=n)&&(e==="loading"&&(t[vo]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Sl(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Tl(t){return t.__attributes??(t.__attributes={[xl]:t.nodeName.includes("-"),[Cl]:t.namespaceURI===Lo})}var Cr=new Map;function Sl(t){var e=Cr.get(t.nodeName);if(e)return e;Cr.set(t.nodeName,e=[]);for(var n,s=t,a=Element.prototype;a!==s;){n=Mr(s);for(var i in n)n[i].set&&e.push(i);s=xa(s)}return e}function lt(t,e,n=e){var s=$n(),a=new WeakSet;hi(t,"input",i=>{var o=i?t.defaultValue:t.value;if(o=ra(t)?ia(o):o,n(o),oe!==null&&a.add(oe),s&&o!==(o=e())){var c=t.selectionStart,l=t.selectionEnd;t.value=o??"",l!==null&&(t.selectionStart=c,t.selectionEnd=Math.min(l,t.value.length))}}),b(e)==null&&t.value&&(n(ra(t)?ia(t.value):t.value),oe!==null&&a.add(oe)),ja(()=>{var i=e();if(t===document.activeElement){var o=qs??oe;if(a.has(o))return}ra(t)&&i===ia(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function ra(t){var e=t.type;return e==="number"||e==="range"}function ia(t){return t===""?null:+t}function _i(t,e,n){var s=hn(t,e);s&&s.set&&(t[e]=n,Da(()=>{t[e]=null}))}function yi(t){return function(...e){var n=e[0];return n.stopPropagation(),t==null?void 0:t.apply(this,e)}}function zt(t=!1){const e=ue,n=e.l.u;if(!n)return;let s=()=>me(e.s);if(t){let a=0,i={};const o=ds(()=>{let c=!1;const l=e.s;for(const v in l)l[v]!==i[v]&&(i[v]=l[v],c=!0);return c&&a++,a});s=()=>r(o)}n.b.length&&Zo(()=>{Tr(e,s),fa(n.b)}),pa(()=>{const a=b(()=>n.m.map(lo));return()=>{for(const i of a)typeof i=="function"&&i()}}),n.a.length&&pa(()=>{Tr(e,s),fa(n.a)})}function Tr(t,e){if(t.l.s)for(const n of t.l.s)r(n);e()}function bi(t,e){var i;var n=(i=t.$$events)==null?void 0:i[e.type],s=Bn(n)?n.slice():n==null?[]:[n];for(var a of s)a.call(this,e)}let bs=!1;function Rl(t){var e=bs;try{return bs=!1,[t(),bs]}finally{bs=e}}function we(t,e,n,s){var A;var a=!In||(n&To)!==0,i=(n&Ro)!==0,o=(n&Ao)!==0,c=s,l=!0,v=()=>(l&&(l=!1,c=o?b(s):s),c),d;if(i){var g=tn in t||fo in t;d=((A=hn(t,e))==null?void 0:A.set)??(g&&e in t?B=>t[e]=B:void 0)}var m,y=!1;i?[m,y]=Rl(()=>t[e]):m=t[e],m===void 0&&s!==void 0&&(m=v(),d&&(a&&bo(),d(m)));var p;if(a?p=()=>{var B=t[e];return B===void 0?v():(l=!0,B)}:p=()=>{var B=t[e];return B!==void 0&&(c=void 0),B===void 0?c:B},a&&(n&So)===0)return p;if(d){var k=t.$$legacy;return function(B,U){return arguments.length>0?((!a||!U||k||y)&&d(U?p():B),B):p()}}var S=!1,L=((n&Co)!==0?ds:Ba)(()=>(S=!1,p()));i&&r(L);var R=X;return function(B,U){if(arguments.length>0){const P=U?r(L):a&&i?Sn(B):B;return f(L,P),S=!0,c!==void 0&&(c=P),B}return kn&&S||(R.f&bn)!==0?L.v:r(L)}}function an(t){ue===null&&La(),In&&ue.l!==null?Nl(ue).m.push(t):pa(()=>{const e=b(t);if(typeof e=="function")return e})}function Al(t){ue===null&&La(),an(()=>()=>b(t))}function Ol(t,e,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:s})}function Dn(){const t=ue;return t===null&&La(),(e,n,s)=>{var i;const a=(i=t.s.$$events)==null?void 0:i[e];if(a){const o=Bn(a)?a.slice():[a],c=Ol(e,n,s);for(const l of o)l.call(t.x,c);return!c.defaultPrevented}return!0}}function Nl(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Ll="5";var Lr;typeof window<"u"&&((Lr=window.__svelte??(window.__svelte={})).v??(Lr.v=new Set)).add(Ll);$o();var Pl=x('<div class="form-group svelte-xpq5ci"><label for="modal-input" class="svelte-xpq5ci"> </label> <input id="modal-input" type="text" class="svelte-xpq5ci"/></div>'),Ml=x('<button class="cancel-btn svelte-xpq5ci"><span class="btn-icon cancel-icon svelte-xpq5ci"></span> </button>'),Bl=x('<div class="modal-overlay svelte-xpq5ci" role="dialog" aria-modal="true" tabindex="-1"><div class="modal-content svelte-xpq5ci" role="document"><div class="modal-header svelte-xpq5ci"><h3 class="svelte-xpq5ci"> </h3> <button class="close-btn svelte-xpq5ci"><span class="btn-icon close-icon svelte-xpq5ci"></span></button></div> <div class="modal-body svelte-xpq5ci"><!></div> <div class="modal-footer svelte-xpq5ci"><!> <button class="confirm-btn svelte-xpq5ci"><span class="btn-icon confirm-icon svelte-xpq5ci"></span> </button></div></div></div>');function za(t,e){Lt(e,!1);let n=we(e,"isOpen",12,!1),s=we(e,"title",8,""),a=we(e,"confirmText",8,"Confirmar"),i=we(e,"cancelText",8,"Cancelar"),o=we(e,"type",8,"confirm"),c=we(e,"inputValue",12,""),l=we(e,"inputPlaceholder",8,""),v=we(e,"inputLabel",8,"");const d=Dn();function g(){o()==="prompt"?d("confirm",c()):d("confirm"),y()}function m(){d("cancel"),y()}function y(){n(!1)}function p(R){R.key==="Escape"?m():R.key==="Enter"&&o()!=="prompt"&&g()}zt();var k=jt(),S=ut(k);{var L=R=>{var A=Bl(),B=u(A),U=u(B),P=u(U),$=u(P),M=h(P,2),C=h(U,2),Q=u(C);kl(Q,e,"default",{},se=>{var fe=jt(),re=ut(fe);{var T=j=>{var Y=Pl(),ye=u(Y),ge=u(ye),Se=h(ye,2);fl(Se),F(()=>{D(ge,v()),Wt(Se,"placeholder",l())}),lt(Se,c),E("keydown",Se,Be=>Be.key==="Enter"&&g()),w(j,Y)};te(re,j=>{o()==="prompt"&&v()&&j(T)})}w(se,fe)});var H=h(C,2),K=u(H);{var z=se=>{var fe=Ml(),re=h(u(fe));F(()=>D(re,` ${i()??""}`)),E("click",fe,m),w(se,fe)};te(K,se=>{o()!=="alert"&&se(z)})}var ae=h(K,2),le=h(u(ae));F(()=>{D($,s()),D(le,` ${a()??""}`)}),E("click",M,m),E("click",ae,g),E("click",B,yi(function(se){bi.call(this,e,se)})),E("click",A,m),E("keydown",A,p),w(R,A)};te(S,R=>{n()&&R(L)})}w(t,k),Pt()}const Nt=Object.create(null);Nt.open="0";Nt.close="1";Nt.ping="2";Nt.pong="3";Nt.message="4";Nt.upgrade="5";Nt.noop="6";const xs=Object.create(null);Object.keys(Nt).forEach(t=>{xs[Nt[t]]=t});const _a={type:"error",data:"parser error"},ki=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",wi=typeof ArrayBuffer=="function",qi=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Ha=({type:t,data:e},n,s)=>ki&&e instanceof Blob?n?s(e):Sr(e,s):wi&&(e instanceof ArrayBuffer||qi(e))?n?s(e):Sr(new Blob([e]),s):s(Nt[t]+(e||"")),Sr=(t,e)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];e("b"+(s||""))},n.readAsDataURL(t)};function Rr(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let oa;function Il(t,e){if(ki&&t.data instanceof Blob)return t.data.arrayBuffer().then(Rr).then(e);if(wi&&(t.data instanceof ArrayBuffer||qi(t.data)))return e(Rr(t.data));Ha(t,!1,n=>{oa||(oa=new TextEncoder),e(oa.encode(n))})}const Ar="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",es=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Ar.length;t++)es[Ar.charCodeAt(t)]=t;const $l=t=>{let e=t.length*.75,n=t.length,s,a=0,i,o,c,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const v=new ArrayBuffer(e),d=new Uint8Array(v);for(s=0;s<n;s+=4)i=es[t.charCodeAt(s)],o=es[t.charCodeAt(s+1)],c=es[t.charCodeAt(s+2)],l=es[t.charCodeAt(s+3)],d[a++]=i<<2|o>>4,d[a++]=(o&15)<<4|c>>2,d[a++]=(c&3)<<6|l&63;return v},Dl=typeof ArrayBuffer=="function",Ga=(t,e)=>{if(typeof t!="string")return{type:"message",data:Ei(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:jl(t.substring(1),e)}:xs[n]?t.length>1?{type:xs[n],data:t.substring(1)}:{type:xs[n]}:_a},jl=(t,e)=>{if(Dl){const n=$l(t);return Ei(n,e)}else return{base64:!0,data:t}},Ei=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},xi="",Fl=(t,e)=>{const n=t.length,s=new Array(n);let a=0;t.forEach((i,o)=>{Ha(i,!1,c=>{s[o]=c,++a===n&&e(s.join(xi))})})},Ul=(t,e)=>{const n=t.split(xi),s=[];for(let a=0;a<n.length;a++){const i=Ga(n[a],e);if(s.push(i),i.type==="error")break}return s};function Vl(){return new TransformStream({transform(t,e){Il(t,n=>{const s=n.length;let a;if(s<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,s);else if(s<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,s)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(s))}t.data&&typeof t.data!="string"&&(a[0]|=128),e.enqueue(a),e.enqueue(n)})}})}let la;function ks(t){return t.reduce((e,n)=>e+n.length,0)}function ws(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let s=0;for(let a=0;a<e;a++)n[a]=t[0][s++],s===t[0].length&&(t.shift(),s=0);return t.length&&s<t[0].length&&(t[0]=t[0].slice(s)),n}function zl(t,e){la||(la=new TextDecoder);const n=[];let s=0,a=-1,i=!1;return new TransformStream({transform(o,c){for(n.push(o);;){if(s===0){if(ks(n)<1)break;const l=ws(n,1);i=(l[0]&128)===128,a=l[0]&127,a<126?s=3:a===126?s=1:s=2}else if(s===1){if(ks(n)<2)break;const l=ws(n,2);a=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),s=3}else if(s===2){if(ks(n)<8)break;const l=ws(n,8),v=new DataView(l.buffer,l.byteOffset,l.length),d=v.getUint32(0);if(d>Math.pow(2,21)-1){c.enqueue(_a);break}a=d*Math.pow(2,32)+v.getUint32(4),s=3}else{if(ks(n)<a)break;const l=ws(n,a);c.enqueue(Ga(i?l:la.decode(l),e)),s=0}if(a===0||a>t){c.enqueue(_a);break}}}})}const Ci=4;function _e(t){if(t)return Hl(t)}function Hl(t){for(var e in _e.prototype)t[e]=_e.prototype[e];return t}_e.prototype.on=_e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};_e.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};_e.prototype.off=_e.prototype.removeListener=_e.prototype.removeAllListeners=_e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var s,a=0;a<n.length;a++)if(s=n[a],s===e||s.fn===e){n.splice(a,1);break}return n.length===0&&delete this._callbacks["$"+t],this};_e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,a=n.length;s<a;++s)n[s].apply(this,e)}return this};_e.prototype.emitReserved=_e.prototype.emit;_e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};_e.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Fs=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),ft=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Gl="arraybuffer";function Ti(t,...e){return e.reduce((n,s)=>(t.hasOwnProperty(s)&&(n[s]=t[s]),n),{})}const Kl=ft.setTimeout,Yl=ft.clearTimeout;function Us(t,e){e.useNativeTimers?(t.setTimeoutFn=Kl.bind(ft),t.clearTimeoutFn=Yl.bind(ft)):(t.setTimeoutFn=ft.setTimeout.bind(ft),t.clearTimeoutFn=ft.clearTimeout.bind(ft))}const Wl=1.33;function Jl(t){return typeof t=="string"?Xl(t):Math.ceil((t.byteLength||t.size)*Wl)}function Xl(t){let e=0,n=0;for(let s=0,a=t.length;s<a;s++)e=t.charCodeAt(s),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(s++,n+=4);return n}function Si(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ql(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Zl(t){let e={},n=t.split("&");for(let s=0,a=n.length;s<a;s++){let i=n[s].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class ec extends Error{constructor(e,n,s){super(e),this.description=n,this.context=s,this.type="TransportError"}}class Ka extends _e{constructor(e){super(),this.writable=!1,Us(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,s){return super.emitReserved("error",new ec(e,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Ga(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=Ql(e);return n.length?"?"+n:""}}class tc extends Ka{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Ul(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Fl(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Si()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let Ri=!1;try{Ri=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const nc=Ri;function sc(){}class ac extends tc{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,n){const s=this.request({method:"POST",data:e});s.on("success",n),s.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=e}}class At extends _e{constructor(e,n,s){super(),this.createRequest=e,Us(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const n=Ti(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&s.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var a;s.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=At.requestsCount++,At.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=sc,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete At.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}At.requestsCount=0;At.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Or);else if(typeof addEventListener=="function"){const t="onpagehide"in ft?"pagehide":"unload";addEventListener(t,Or,!1)}}function Or(){for(let t in At.requests)At.requests.hasOwnProperty(t)&&At.requests[t].abort()}const rc=function(){const t=Ai({xdomain:!1});return t&&t.responseType!==null}();class ic extends ac{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=rc&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new At(Ai,this.uri(),e)}}function Ai(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||nc))return new XMLHttpRequest}catch{}if(!e)try{return new ft[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Oi=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class oc extends Ka{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,s=Oi?{}:Ti(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,s)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const s=e[n],a=n===e.length-1;Ha(s,this.supportsBinary,i=>{try{this.doWrite(s,i)}catch{}a&&Fs(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Si()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const ca=ft.WebSocket||ft.MozWebSocket;class lc extends oc{createSocket(e,n,s){return Oi?new ca(e,n,s):n?new ca(e,n):new ca(e)}doWrite(e,n){this.ws.send(n)}}class cc extends Ka{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=zl(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(n).getReader(),a=Vl();a.readable.pipeTo(e.writable),this._writer=a.writable.getWriter();const i=()=>{s.read().then(({done:c,value:l})=>{c||(this.onPacket(l),i())}).catch(c=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const s=e[n],a=n===e.length-1;this._writer.write(s).then(()=>{a&&Fs(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const uc={websocket:lc,webtransport:cc,polling:ic},fc=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,dc=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ya(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),s=t.indexOf("]");n!=-1&&s!=-1&&(t=t.substring(0,n)+t.substring(n,s).replace(/:/g,";")+t.substring(s,t.length));let a=fc.exec(t||""),i={},o=14;for(;o--;)i[dc[o]]=a[o]||"";return n!=-1&&s!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=vc(i,i.path),i.queryKey=hc(i,i.query),i}function vc(t,e){const n=/\/{2,9}/g,s=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function hc(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,a,i){a&&(n[a]=i)}),n}const ba=typeof addEventListener=="function"&&typeof removeEventListener=="function",Cs=[];ba&&addEventListener("offline",()=>{Cs.forEach(t=>t())},!1);class nn extends _e{constructor(e,n){if(super(),this.binaryType=Gl,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const s=ya(e);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=ya(n.host).host);Us(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const a=s.prototype.name;this.transports.push(a),this._transportsByName[a]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Zl(this.opts.query)),ba&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Cs.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=Ci,n.transport=e,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&nn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",nn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const a=this.writeBuffer[s].data;if(a&&(n+=Jl(a)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Fs(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,s){return this._sendPacket("message",e,n,s),this}send(e,n,s){return this._sendPacket("message",e,n,s),this}_sendPacket(e,n,s,a){if(typeof n=="function"&&(a=n,n=void 0),typeof s=="function"&&(a=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const i={type:e,data:n,options:s};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(nn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ba&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Cs.indexOf(this._offlineEventListener);s!==-1&&Cs.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}nn.protocol=Ci;class pc extends nn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),s=!1;nn.priorWebsocketSuccess=!1;const a=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",g=>{if(!s)if(g.type==="pong"&&g.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;nn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=n.name,this.emitReserved("upgradeError",m)}}))};function i(){s||(s=!0,d(),n.close(),n=null)}const o=g=>{const m=new Error("probe error: "+g);m.transport=n.name,i(),this.emitReserved("upgradeError",m)};function c(){o("transport closed")}function l(){o("socket closed")}function v(g){n&&g.name!==n.name&&i()}const d=()=>{n.removeListener("open",a),n.removeListener("error",o),n.removeListener("close",c),this.off("close",l),this.off("upgrading",v)};n.once("open",a),n.once("error",o),n.once("close",c),this.once("close",l),this.once("upgrading",v),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&n.push(e[s]);return n}}let gc=class extends pc{constructor(e,n={}){const s=typeof e=="object"?e:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(a=>uc[a]).filter(a=>!!a)),super(e,s)}};function mc(t,e="",n){let s=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),s=ya(t)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const i=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+i+":"+s.port+e,s.href=s.protocol+"://"+i+(n&&n.port===s.port?"":":"+s.port),s}const _c=typeof ArrayBuffer=="function",yc=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Ni=Object.prototype.toString,bc=typeof Blob=="function"||typeof Blob<"u"&&Ni.call(Blob)==="[object BlobConstructor]",kc=typeof File=="function"||typeof File<"u"&&Ni.call(File)==="[object FileConstructor]";function Ya(t){return _c&&(t instanceof ArrayBuffer||yc(t))||bc&&t instanceof Blob||kc&&t instanceof File}function Ts(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,s=t.length;n<s;n++)if(Ts(t[n]))return!0;return!1}if(Ya(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Ts(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Ts(t[n]))return!0;return!1}function wc(t){const e=[],n=t.data,s=t;return s.data=ka(n,e),s.attachments=e.length,{packet:s,buffers:e}}function ka(t,e){if(!t)return t;if(Ya(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let s=0;s<t.length;s++)n[s]=ka(t[s],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=ka(t[s],e));return n}return t}function qc(t,e){return t.data=wa(t.data,e),delete t.attachments,t}function wa(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=wa(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=wa(t[n],e));return t}const Ec=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],xc=5;var W;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(W||(W={}));class Cc{constructor(e){this.replacer=e}encode(e){return(e.type===W.EVENT||e.type===W.ACK)&&Ts(e)?this.encodeAsBinary({type:e.type===W.EVENT?W.BINARY_EVENT:W.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===W.BINARY_EVENT||e.type===W.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=wc(e),s=this.encodeAsString(n.packet),a=n.buffers;return a.unshift(s),a}}function Nr(t){return Object.prototype.toString.call(t)==="[object Object]"}class Wa extends _e{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const s=n.type===W.BINARY_EVENT;s||n.type===W.BINARY_ACK?(n.type=s?W.EVENT:W.ACK,this.reconstructor=new Tc(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Ya(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const s={type:Number(e.charAt(0))};if(W[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===W.BINARY_EVENT||s.type===W.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(i,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(o)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););s.nsp=e.substring(i,n)}else s.nsp="/";const a=e.charAt(n+1);if(a!==""&&Number(a)==a){const i=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}s.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(Wa.isPayloadValid(s.type,i))s.data=i;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case W.CONNECT:return Nr(n);case W.DISCONNECT:return n===void 0;case W.CONNECT_ERROR:return typeof n=="string"||Nr(n);case W.EVENT:case W.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Ec.indexOf(n[0])===-1);case W.ACK:case W.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Tc{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=qc(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Sc=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Wa,Encoder:Cc,get PacketType(){return W},protocol:xc},Symbol.toStringTag,{value:"Module"}));function bt(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const Rc=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Li extends _e{constructor(e,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[bt(e,"open",this.onopen.bind(this)),bt(e,"packet",this.onpacket.bind(this)),bt(e,"error",this.onerror.bind(this)),bt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var s,a,i;if(Rc.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:W.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,g=n.pop();this._registerAckCallback(d,g),o.id=d}const c=(a=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||a===void 0?void 0:a.writable,l=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!c||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var s;const a=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(a===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===e&&this.sendBuffer.splice(c,1);n.call(this,new Error("operation has timed out"))},a),o=(...c)=>{this.io.clearTimeoutFn(i),n.apply(this,c)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((s,a)=>{const i=(o,c)=>o?a(o):s(c);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((a,...i)=>s!==this._queue[0]?void 0:(a!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(a)):(this._queue.shift(),n&&n(null,...i)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:W.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case W.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case W.EVENT:case W.BINARY_EVENT:this.onevent(e);break;case W.ACK:case W.BINARY_ACK:this.onack(e);break;case W.DISCONNECT:this.ondisconnect();break;case W.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let s=!1;return function(...a){s||(s=!0,n.packet({type:W.ACK,id:e,data:a}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:W.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,e.data)}}}function jn(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}jn.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};jn.prototype.reset=function(){this.attempts=0};jn.prototype.setMin=function(t){this.ms=t};jn.prototype.setMax=function(t){this.max=t};jn.prototype.setJitter=function(t){this.jitter=t};class qa extends _e{constructor(e,n){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Us(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new jn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const a=n.parser||Sc;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new gc(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const a=bt(n,"open",function(){s.onopen(),e&&e()}),i=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),e?e(c):this.maybeReconnectOnOpen()},o=bt(n,"error",i);if(this._timeout!==!1){const c=this._timeout,l=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),n.close()},c);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(a),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(bt(e,"ping",this.onping.bind(this)),bt(e,"data",this.ondata.bind(this)),bt(e,"error",this.onerror.bind(this)),bt(e,"close",this.onclose.bind(this)),bt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Fs(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new Li(this,e,n),this.nsps[e]=s),s}_destroy(e){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let s=0;s<n.length;s++)this.engine.write(n[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(a=>{a?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",a)):e.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Jn={};function Ss(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=mc(t,e.path||"/socket.io"),s=n.source,a=n.id,i=n.path,o=Jn[a]&&i in Jn[a].nsps,c=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return c?l=new qa(s,e):(Jn[a]||(Jn[a]=new qa(s,e)),l=Jn[a]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(Ss,{Manager:qa,Socket:Li,io:Ss,connect:Ss});const Pi=window.location.origin;console.log("🔗 Conectando a servidor Socket.IO:",Pi);const ze=Ss(Pi,{autoConnect:!1,transports:["websocket","polling"],reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5,timeout:2e4});ze.on("connect",()=>{console.log("✅ Conectado al servidor Socket.IO")});ze.on("disconnect",t=>{console.log("❌ Desconectado del servidor:",t)});ze.on("connect_error",t=>{console.error("🔥 Error de conexión:",t)});var Ac=x('<div class="time-up svelte-15u05dc"><span class="btn-icon alert-icon svelte-15u05dc"></span> ¡TIEMPO AGOTADO!</div>'),Oc=x('<div class="timer-control svelte-15u05dc"><h3 class="svelte-15u05dc">Control de Tiempo</h3> <div class="timer-display svelte-15u05dc"><div class="time-text svelte-15u05dc"> </div> <div class="progress-bar svelte-15u05dc"><div class="progress-fill svelte-15u05dc"></div></div></div> <div class="main-controls svelte-15u05dc"><button><span></span> </button></div> <div class="time-adjustments svelte-15u05dc"><h4 class="svelte-15u05dc">Ajustes Rápidos</h4> <div class="adjustment-buttons svelte-15u05dc"><button class="adj-btn minus svelte-15u05dc">-5 min</button> <button class="adj-btn minus svelte-15u05dc">-2 min</button> <button class="adj-btn plus svelte-15u05dc">+2 min</button> <button class="adj-btn plus svelte-15u05dc">+5 min</button></div> <button class="custom-time-btn svelte-15u05dc"><span class="btn-icon custom-time-icon svelte-15u05dc"></span> Tiempo Personalizado</button></div> <div class="chromecast-status svelte-15u05dc"><div><span></span> </div> <!></div></div> <!>',1);function Nc(t,e){Lt(e,!1);const n=N(),s=N();let a=we(e,"room",12);const i=Dn();let o=N(!1),c=N("60"),l=N(!1),v;function d(){a(a().isRunning=!a().isRunning,!0),i("timer-update",{isRunning:a().isRunning})}function g(q){a(a().timeRemaining=Math.max(0,a().timeRemaining+q*60),!0),i("timer-update",{timeRemaining:a().timeRemaining})}function m(){f(o,!0)}function y(q){const ee=q.detail;ee&&!isNaN(Number(ee))&&(a(a().timeRemaining=Number(ee)*60,!0),i("timer-update",{timeRemaining:a().timeRemaining}))}async function p(){try{const q=await fetch(`/api/chromecast-status/${a().id}`);if(q.ok){const ee=await q.json();f(l,ee.casting||!1),console.log(`📺 Chrome Cast status for room ${a().id}:`,r(l)?"Casting":"Not casting")}else console.warn("⚠️ Failed to check Chrome Cast status from API"),f(l,!1)}catch(q){console.error("❌ Error checking Chrome Cast status:",q),f(l,!1)}}function k(){p(),v=setInterval(()=>{p()},3e3)}function S(){v&&clearInterval(v)}an(()=>{k(),ze.on("chromecast-status-change",L)}),Al(()=>{S(),ze.off("chromecast-status-change",L)});function L(q){q.roomId===a().id&&(f(l,q.connected),console.log(`📺 Chrome Cast status updated for room ${a().id}:`,q.connected?"Connected":"Disconnected"))}St(()=>me(a()),()=>{f(n,a().timeRemaining<300?"#ff4757":a().timeRemaining<900?"#ffa502":"#00d4ff")}),St(()=>me(a()),()=>{f(s,a().timeRemaining/3600*100)}),js(),zt();var R=Oc(),A=ut(R),B=h(u(A),2),U=u(B),P=u(U),$=h(U,2),M=u($),C=h(B,2),Q=u(C);let H;var K=u(Q);let z;var ae=h(K),le=h(C,2),se=h(u(le),2),fe=u(se),re=h(fe,2),T=h(re,2),j=h(T,2),Y=h(se,2),ye=h(le,2),ge=u(ye);let Se;var Be=u(ge);let qt;var et=h(Be),rn=h(ge,2);{var on=q=>{var ee=Ac();w(q,ee)};te(rn,q=>{me(a()),b(()=>a().timeRemaining<=0)&&q(on)})}var ln=h(A,2);za(ln,{title:"Tiempo Personalizado",type:"prompt",inputLabel:"Ingresa los minutos para el temporizador:",inputPlaceholder:"60",confirmText:"Establecer",cancelText:"Cancelar",get isOpen(){return r(o)},set isOpen(q){f(o,q)},get inputValue(){return r(c)},set inputValue(q){f(c,q)},$$events:{confirm:y},$$legacy:!0}),F((q,ee,ke,Bt,Ht,Oe)=>{xr(B,`color: ${r(n)??""}`),D(P,`${q??""}:${ee??""}`),xr(M,`width: ${r(s)??""}%; background-color: ${r(n)??""}`),H=Te(Q,1,"play-pause-btn svelte-15u05dc",null,H,ke),z=Te(K,1,"btn-icon play-pause-icon svelte-15u05dc",null,z,Bt),D(ae,` ${me(a()),b(()=>a().isRunning?"Pausar":"Iniciar")??""}`),Se=Te(ge,1,"status-indicator svelte-15u05dc",null,Se,Ht),qt=Te(Be,1,"status-light svelte-15u05dc",null,qt,Oe),D(et,` ${r(l)?"Chrome Cast Conectado":"Chrome Cast Desconectado"}`)},[()=>(me(a()),b(()=>Math.floor(a().timeRemaining/60))),()=>(me(a()),b(()=>(a().timeRemaining%60).toString().padStart(2,"0"))),()=>({playing:a().isRunning}),()=>({playing:a().isRunning}),()=>({active:r(l)}),()=>({active:r(l)})]),E("click",Q,d),E("click",fe,()=>g(-5)),E("click",re,()=>g(-2)),E("click",T,()=>g(2)),E("click",j,()=>g(5)),E("click",Y,m),w(t,R),Pt()}var Lc=x('<div class="penalty-notice svelte-d2i4xl">⚠️ Siguientes pistas: -2 min cada una</div>'),Pc=x('<div class="loading-hints svelte-d2i4xl"><div class="loading-spinner svelte-d2i4xl"></div> <p class="svelte-d2i4xl">Cargando pistas...</p></div>'),Mc=x('<div class="no-hints svelte-d2i4xl"><p class="svelte-d2i4xl">No hay pistas disponibles. <button class="secondary svelte-d2i4xl"><span class="btn-icon refresh-icon svelte-d2i4xl"></span> Recargar</button></p></div>'),Bc=x('<button><div class="hint-preview svelte-d2i4xl"> </div></button>'),Ic=x('<div class="category-section svelte-d2i4xl"><h5 class="svelte-d2i4xl"> </h5> <div class="hints-grid svelte-d2i4xl"></div></div>'),$c=x('<div class="hints-container svelte-d2i4xl"></div>'),Dc=x('<div class="hints-library svelte-d2i4xl"><h4 class="svelte-d2i4xl">Seleccionar pista predefinida:</h4> <!></div>'),jc=x('<div class="custom-hint svelte-d2i4xl"><h4 class="svelte-d2i4xl">Escribir pista personalizada:</h4> <textarea placeholder="Escribe tu pista personalizada aquí... (Presiona Enter para enviar)" rows="4" class="svelte-d2i4xl"></textarea> <button><span class="btn-icon send-icon svelte-d2i4xl"></span> Enviar Pista Personalizada</button></div>'),Fc=x('<div class="hint-system svelte-d2i4xl"><h3 class="svelte-d2i4xl">Sistema de Pistas</h3> <div class="hints-counter svelte-d2i4xl"><div><span class="count svelte-d2i4xl"> </span> <span class="label svelte-d2i4xl"> </span> <!></div> <button class="add-hints-btn svelte-d2i4xl">➕ Agregar Pistas</button></div> <div class="hint-type-selector svelte-d2i4xl"><button><span class="btn-icon library-icon svelte-d2i4xl"></span> Biblioteca</button> <button><span class="btn-icon edit-icon svelte-d2i4xl"></span> Personalizada</button></div> <!> <div class="language-info svelte-d2i4xl"><small class="svelte-d2i4xl">🌐 Enviando pistas en: <strong class="svelte-d2i4xl"> </strong></small></div></div> <!>',1);function Uc(t,e){Lt(e,!1);const n=N();let s=we(e,"room",12),a=we(e,"currentLanguage",8);const i=Dn();let o=N(""),c=N([]),l=N(!1),v=N(!1),d=N("1"),g=N(!0),m=N(void 0);const y=window.location.origin;an(async()=>{f(m,s().id),await p()});async function p(){try{f(g,!0);const q=await fetch(`${y}/api/rooms/${s().id}/hints`);q.ok?(f(c,await q.json()),console.log("✅ Pistas cargadas desde servidor para sala",s().id,":",r(c).length)):console.error("❌ Error cargando pistas:",q.statusText)}catch(q){console.error("❌ Error conectando con servidor:",q)}finally{f(g,!1)}}function k(q){q.trim()&&(ze.emit("hint-sent",{roomId:s().id,hint:q,language:a()}),i("hint-sent",{hint:q,language:a()}),f(o,""),f(l,!1))}function S(q){k(q.text[a()])}function L(){k(r(o))}function R(){f(v,!0)}function A(q){const ee=q.detail;if(ee&&!isNaN(Number(ee))){const ke=Number(ee);s(s().hintsRemaining+=ke,!0),s(s().freeHintsCount=(s().freeHintsCount||3)+ke,!0),i("hint-sent",{hintsAdded:ke,freeHintsIncreased:ke})}}function B(){f(l,!r(l))}function U(q){q.key==="Enter"&&!q.shiftKey&&(q.preventDefault(),r(o).trim()&&L())}St(()=>(me(s()),r(m)),()=>{s().id!==void 0&&s().id!==r(m)&&(f(m,s().id),p())}),St(()=>r(c),()=>{f(n,r(c).reduce((q,ee)=>(q[ee.category]||(q[ee.category]=[]),q[ee.category].push(ee),q),{}))}),js(),zt();var P=Fc(),$=ut(P),M=h(u($),2),C=u(M);let Q;var H=u(C),K=u(H),z=h(H,2),ae=u(z),le=h(z,2);{var se=q=>{var ee=Lc();w(q,ee)};te(le,q=>{me(s()),b(()=>s().hintsRemaining<=0)&&q(se)})}var fe=h(C,2),re=h(M,2),T=u(re);let j;var Y=h(T,2);let ye;var ge=h(re,2);{var Se=q=>{var ee=Dc(),ke=h(u(ee),2);{var Bt=Oe=>{var Gt=Pc();w(Oe,Gt)},Ht=Oe=>{var Gt=jt(),Vs=ut(Gt);{var ps=Kt=>{var Et=Mc(),Fn=u(Et),Un=h(u(Fn));E("click",Un,p),w(Kt,Et)},gs=Kt=>{var Et=$c();xe(Et,5,()=>(r(n),b(()=>Object.entries(r(n)))),Ee,(Fn,Un)=>{var Vn=Ur(()=>Br(r(Un),2));let zs=()=>r(Vn)[0],Hs=()=>r(Vn)[1];var It=Ic(),ms=u(It),Gs=u(ms),Ks=h(ms,2);xe(Ks,5,Hs,Ee,(zn,Hn)=>{var wn=Bc();let _s;var Ys=u(wn),Ws=u(Ys);F(Js=>{_s=Te(wn,1,"hint-card svelte-d2i4xl",null,_s,Js),D(Ws,(r(Hn),me(a()),b(()=>r(Hn).text[a()])))},[()=>({"penalty-warning":s().hintsRemaining<=0})]),E("click",wn,()=>S(r(Hn))),w(zn,wn)}),F(()=>D(Gs,zs())),w(Fn,It)}),w(Kt,Et)};te(Vs,Kt=>{r(n),b(()=>Object.keys(r(n)).length===0)?Kt(ps):Kt(gs,!1)},!0)}w(Oe,Gt)};te(ke,Oe=>{r(g)?Oe(Bt):Oe(Ht,!1)})}w(q,ee)},Be=q=>{var ee=jc(),ke=h(u(ee),2),Bt=h(ke,2);let Ht;F((Oe,Gt)=>{Ht=Te(Bt,1,"send-hint-btn svelte-d2i4xl",null,Ht,Oe),Bt.disabled=Gt},[()=>({"penalty-warning":s().hintsRemaining<=0}),()=>(r(o),b(()=>!r(o).trim()))]),lt(ke,()=>r(o),Oe=>f(o,Oe)),E("keydown",ke,U),E("click",Bt,L),w(q,ee)};te(ge,q=>{r(l)?q(Be,!1):q(Se)})}var qt=h(ge,2),et=u(qt),rn=h(u(et)),on=u(rn),ln=h($,2);za(ln,{title:"Agregar Pistas",type:"prompt",inputLabel:"¿Cuántas pistas adicionales quieres agregar?",inputPlaceholder:"1",confirmText:"Agregar",cancelText:"Cancelar",get isOpen(){return r(v)},set isOpen(q){f(v,q)},get inputValue(){return r(d)},set inputValue(q){f(d,q)},$$events:{confirm:A},$$legacy:!0}),F((q,ee,ke)=>{Q=Te(C,1,"counter-display svelte-d2i4xl",null,Q,q),D(K,(me(s()),b(()=>s().hintsRemaining))),D(ae,(me(s()),b(()=>s().hintsRemaining<=0?"pistas gratuitas agotadas":"pistas restantes"))),j=Te(T,1,"type-btn svelte-d2i4xl",null,j,ee),ye=Te(Y,1,"type-btn svelte-d2i4xl",null,ye,ke),D(on,a()==="es"?"Español":a()==="en"?"English":a()==="fr"?"Français":"Deutsch")},[()=>({low:s().hintsRemaining<=1,empty:s().hintsRemaining<=0}),()=>({active:!r(l)}),()=>({active:r(l)})]),E("click",fe,R),E("click",T,()=>f(l,!1)),E("click",Y,B),w(t,P),Pt()}var Vc=x('<div class="loading-messages svelte-vvwwmr"><p>Cargando mensajes...</p></div>'),zc=x('<button class="quick-message-btn svelte-vvwwmr"> </button>'),Hc=x('<p class="no-messages svelte-vvwwmr">No hay mensajes configurados para esta sala</p>'),Gc=x('<div class="quick-messages svelte-vvwwmr"><!> <!></div>'),Kc=x('<div class="last-message svelte-vvwwmr"><h4 class="svelte-vvwwmr">Último mensaje enviado:</h4> <div class="message-display svelte-vvwwmr"> </div></div>'),Yc=x('<div class="message-system svelte-vvwwmr"><h3 class="svelte-vvwwmr">Sistema de Mensajes</h3> <div class="predefined-messages"><!></div> <!> <div class="language-info svelte-vvwwmr"><small class="svelte-vvwwmr">🌐 Enviando mensajes en: <strong class="svelte-vvwwmr"> </strong></small></div></div>');function Wc(t,e){Lt(e,!1);let n=we(e,"room",8),s=we(e,"currentLanguage",8);const a=Dn();let i=N({es:[],en:[],fr:[],de:[]}),o=N(!0),c=N(void 0);const l=window.location.origin;an(async()=>{f(c,n().id),await v()});async function v(){try{f(o,!0);for(const M of["es","en","fr","de"]){const C=await fetch(`${l}/api/rooms/${n().id}/messages/${M}`);if(C.ok){const Q=await C.json();Ve(i,r(i)[M]=Q.map(H=>H.message))}}console.log("✅ Mensajes cargados para sala",n().id),r(i)[s()].length===0&&await d()}catch(M){console.error("❌ Error cargando mensajes:",M),f(i,g())}finally{f(o,!1)}}async function d(){const M=g();try{for(const[C,Q]of Object.entries(M))for(const H of Q)await fetch(`${l}/api/rooms/${n().id}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({language:C,message:H})});await v()}catch(C){console.error("❌ Error inicializando mensajes:",C)}}function g(){return{es:["¡Excelente trabajo equipo!","Van por buen camino","Se están acercando a la solución","¡Muy bien! Sigan así","Tómense un momento para revisar","Trabajan muy bien en equipo","¡Están a punto de resolverlo!","Recuerden que tienen pistas disponibles"],en:["Excellent work team!","You're on the right track","You're getting closer to the solution","Very good! Keep it up","Take a moment to review","You work very well as a team","You're about to solve it!","Remember you have hints available"],fr:["Excellent travail équipe !","Vous êtes sur la bonne voie","Vous vous rapprochez de la solution","Très bien ! Continuez comme ça","Prenez un moment pour réviser","Vous travaillez très bien en équipe","Vous êtes sur le point de le résoudre !","Rappelez-vous que vous avez des indices disponibles"],de:["Ausgezeichnete Arbeit Team!","Ihr seid auf dem richtigen Weg","Ihr kommt der Lösung näher","Sehr gut! Macht weiter so","Nehmt euch einen Moment zum Überprüfen","Ihr arbeitet sehr gut als Team","Ihr seid kurz davor es zu lösen!","Denkt daran, dass ihr Hinweise zur Verfügung habt"]}}function m(M){if(!M.trim()){alert("Escribe un mensaje válido");return}const C={message:M,timestamp:new Date,language:s(),isQuickMessage:!0};ze.emit("message-sent",{roomId:n().id,message:M,language:s(),isQuickMessage:!0}),a("message-sent",C)}St(()=>(me(n()),r(c)),()=>{n().id!==void 0&&n().id!==r(c)&&(f(c,n().id),v())}),js(),zt();var y=Yc(),p=h(u(y),2),k=u(p);{var S=M=>{var C=Vc();w(M,C)},L=M=>{var C=Gc(),Q=u(C);xe(Q,1,()=>(r(i),me(s()),b(()=>r(i)[s()])),Ee,(z,ae)=>{var le=zc(),se=u(le);F(()=>D(se,r(ae))),E("click",le,()=>m(r(ae))),w(z,le)});var H=h(Q,2);{var K=z=>{var ae=Hc();w(z,ae)};te(H,z=>{r(i),me(s()),b(()=>r(i)[s()].length===0)&&z(K)})}w(M,C)};te(k,M=>{r(o)?M(S):M(L,!1)})}var R=h(p,2);{var A=M=>{var C=Kc(),Q=h(u(C),2),H=u(Q);F(()=>D(H,`"${me(n()),b(()=>n().lastMessage)??""}"`)),w(M,C)};te(R,M=>{me(n()),b(()=>n().lastMessage)&&M(A)})}var B=h(R,2),U=u(B),P=h(u(U)),$=u(P);F(()=>D($,s()==="es"?"Español":s()==="en"?"English":s()==="fr"?"Français":"Deutsch")),w(t,y),Pt()}var Jc=x("<p>¿Estás seguro de que quieres reiniciar esta sala?</p> <p><strong>Esto restablecerá:</strong></p> <ul><li>Temporizador (60 minutos)</li> <li>Pistas disponibles (3)</li> <li>Estado del temporizador (pausado)</li> <li>Mensajes y jugadores</li></ul>",1),Xc=x('<div class="room-container svelte-1eahy5v"><div class="room-header svelte-1eahy5v"><h2 class="svelte-1eahy5v"> </h2> <button class="reset-btn svelte-1eahy5v"><span class="btn-icon reset-icon svelte-1eahy5v"></span> Reiniciar Sala</button></div> <div class="room-grid svelte-1eahy5v"><div class="timer-section svelte-1eahy5v"><!></div> <div class="hints-section svelte-1eahy5v"><!></div> <div class="messages-section svelte-1eahy5v"><!></div></div></div> <!>',1);function Qc(t,e){Lt(e,!1);let n=we(e,"room",12),s=we(e,"currentLanguage",8);const a=Dn();let i=N(!1);function o(){f(i,!0)}function c(){n(n().timeRemaining=3600,!0),n(n().isRunning=!1,!0),n(n().hintsRemaining=3,!0),n(n().lastMessage="",!0),n(n().players=[],!0),ze.emit("reset-room",n().id),a("room-update",n())}function l(C){n({...n(),...C.detail}),a("room-update",n())}function v(C){a("room-update",n())}function d(C){n(n().lastMessage=C.detail.message,!0),a("room-update",n())}zt();var g=Xc(),m=ut(g),y=u(m),p=u(y),k=u(p),S=h(p,2),L=h(y,2),R=u(L),A=u(R);Nc(A,{get room(){return n()},set room(C){n(C)},$$events:{"timer-update":l},$$legacy:!0});var B=h(R,2),U=u(B);Uc(U,{get currentLanguage(){return s()},get room(){return n()},set room(C){n(C)},$$events:{"hint-sent":v},$$legacy:!0});var P=h(B,2),$=u(P);Wc($,{get currentLanguage(){return s()},get room(){return n()},set room(C){n(C)},$$events:{"message-sent":d},$$legacy:!0});var M=h(m,2);za(M,{title:"Reiniciar Sala",confirmText:"Reiniciar",cancelText:"Cancelar",get isOpen(){return r(i)},set isOpen(C){f(i,C)},$$events:{confirm:c},children:(C,Q)=>{var H=Jc();w(C,H)},$$slots:{default:!0},$$legacy:!0}),F(()=>D(k,(me(n()),b(()=>n().name)))),E("click",S,o),w(t,g),Pt()}var Zc=x('<option class="svelte-t54zvl"> </option>'),eu=x('<div class="language-selector svelte-t54zvl"><label for="language" class="svelte-t54zvl">🌐</label> <select id="language" class="svelte-t54zvl"></select></div>');function tu(t,e){Lt(e,!1);let n=we(e,"currentLanguage",12),s=N([{code:"es",name:"Español",flag:"🇪🇸"},{code:"en",name:"English",flag:"🇺🇸"},{code:"fr",name:"Français",flag:"🇫🇷"},{code:"de",name:"Deutsch",flag:"🇩🇪"}]);const a=window.location.origin;async function i(){try{const d=await fetch(`${a}/api/languages`);if(d.ok){const g=await d.json();f(s,g.map(m=>({code:m.code,name:m.name,flag:m.flag}))),console.log("🌐 Languages loaded in selector:",r(s).length)}}catch(d){console.error("❌ Error loading languages for selector:",d)}}an(()=>(i(),window.addEventListener("languages-updated",i),()=>{window.removeEventListener("languages-updated",i)}));function o(d){n(d)}function c(){i()}zt();var l=eu(),v=h(u(l),2);return F(()=>{n(),Xn(()=>{r(s)})}),xe(v,5,()=>r(s),Ee,(d,g)=>{var m=Zc(),y=u(m),p={};F(()=>{D(y,`${r(g),b(()=>r(g).flag)??""} ${r(g),b(()=>r(g).name)??""}`),p!==(p=(r(g),b(()=>r(g).code)))&&(m.value=(m.__value=(r(g),b(()=>r(g).code)))??"")}),w(d,m)}),Zn(v,n),E("change",v,d=>o(d.target.value)),w(t,l),_i(e,"reloadLanguages",c),Pt({reloadLanguages:c})}var nu=x("<option> </option>"),su=x('<div class="edit-room svelte-1q4kqs3"><input type="text" placeholder="Nombre de la sala" class="svelte-1q4kqs3"/> <button class="save-btn svelte-1q4kqs3"><span class="btn-icon save-icon svelte-1q4kqs3"></span> Guardar</button> <button class="cancel-btn svelte-1q4kqs3"><span class="btn-icon cancel-icon svelte-1q4kqs3"></span> Cancelar</button></div>'),au=x('<div class="room-display svelte-1q4kqs3"><span class="room-name svelte-1q4kqs3"> </span> <button class="edit-btn svelte-1q4kqs3"><span class="btn-icon edit-icon svelte-1q4kqs3"></span> Editar</button></div>'),ru=x('<div class="room-item svelte-1q4kqs3"><!></div>'),iu=x('<div class="rooms-tab svelte-1q4kqs3"><h3 class="svelte-1q4kqs3">Gestión de Salas</h3> <div class="rooms-list"></div></div>'),ou=x("<option> </option>"),lu=x("<option>General</option>"),cu=x('<textarea class="svelte-1q4kqs3"></textarea>'),uu=x('<textarea class="svelte-1q4kqs3"></textarea>'),fu=x('<div class="form-group svelte-1q4kqs3"><label class="svelte-1q4kqs3"> </label> <!></div>'),du=x('<div class="hint-form svelte-1q4kqs3"><h4> </h4> <div class="form-group svelte-1q4kqs3"><label for="hint-category" class="svelte-1q4kqs3">Categoría:</label> <select id="hint-category" class="svelte-1q4kqs3"><!><!></select></div> <!> <div class="form-actions svelte-1q4kqs3"><button class="save-btn svelte-1q4kqs3"><span class="btn-icon save-icon svelte-1q4kqs3"></span> </button> <button class="cancel-btn svelte-1q4kqs3"><span class="btn-icon cancel-icon svelte-1q4kqs3"></span> Cancelar</button></div></div>'),vu=x('<div class="hint-item svelte-1q4kqs3"><div class="hint-content svelte-1q4kqs3"><span class="hint-text"> </span></div> <div class="hint-actions svelte-1q4kqs3"><button class="edit-btn svelte-1q4kqs3"><span class="btn-icon edit-icon svelte-1q4kqs3"></span> Editar</button> <button class="delete-btn svelte-1q4kqs3"><span class="btn-icon delete-icon svelte-1q4kqs3"></span> Eliminar</button></div></div>'),hu=x('<div class="category-group svelte-1q4kqs3"><h4 class="svelte-1q4kqs3"> </h4> <!></div>'),pu=x('<div class="hints-tab svelte-1q4kqs3"><div class="hints-header svelte-1q4kqs3"><h3 class="svelte-1q4kqs3">Gestión de Pistas</h3> <button class="create-btn svelte-1q4kqs3"><span class="btn-icon plus-icon svelte-1q4kqs3"></span> Crear Pista</button></div> <!> <div class="hints-list"></div></div>'),gu=x('<div class="category-form svelte-1q4kqs3"><h4 class="svelte-1q4kqs3">Crear Nueva Categoría</h4> <div class="form-group svelte-1q4kqs3"><label for="category-name" class="svelte-1q4kqs3">Nombre de la categoría:</label> <input id="category-name" type="text" placeholder="Nombre de la categoría..." class="svelte-1q4kqs3"/></div> <div class="form-actions svelte-1q4kqs3"><button class="save-btn svelte-1q4kqs3"><span class="btn-icon save-icon svelte-1q4kqs3"></span> Crear Categoría</button> <button class="cancel-btn svelte-1q4kqs3"><span class="btn-icon cancel-icon svelte-1q4kqs3"></span> Cancelar</button></div></div>'),mu=x('<div class="no-categories svelte-1q4kqs3"><p>No hay categorías definidas para esta sala.</p> <p>Las categorías te ayudan a organizar tus pistas.</p></div>'),_u=x('<div class="category-edit svelte-1q4kqs3"><input type="text" class="svelte-1q4kqs3"/> <button class="save-btn small svelte-1q4kqs3"><span class="btn-icon save-icon svelte-1q4kqs3"></span></button> <button class="cancel-btn small svelte-1q4kqs3"><span class="btn-icon cancel-icon svelte-1q4kqs3"></span></button></div>'),yu=x('<div class="category-display svelte-1q4kqs3"><span class="category-name svelte-1q4kqs3"> </span> <div class="category-actions svelte-1q4kqs3"><button class="edit-btn small svelte-1q4kqs3"><span class="btn-icon edit-icon svelte-1q4kqs3"></span></button> <button class="delete-btn small svelte-1q4kqs3"><span class="btn-icon delete-icon svelte-1q4kqs3"></span></button></div></div>'),bu=x('<div class="category-item svelte-1q4kqs3"><!></div>'),ku=x('<div class="categories-tab svelte-1q4kqs3"><div class="categories-header svelte-1q4kqs3"><h3 class="svelte-1q4kqs3"> </h3> <button class="create-btn svelte-1q4kqs3"><span class="btn-icon plus-icon svelte-1q4kqs3"></span> Crear Categoría</button></div> <!> <div class="categories-list svelte-1q4kqs3"><h4 class="svelte-1q4kqs3"> </h4> <!></div> <div class="category-info svelte-1q4kqs3"><h4 class="svelte-1q4kqs3">💡 Información sobre categorías:</h4> <ul class="svelte-1q4kqs3"><li class="svelte-1q4kqs3">Las categorías son específicas de cada sala</li> <li class="svelte-1q4kqs3">No puedes eliminar una categoría que contenga pistas</li> <li class="svelte-1q4kqs3">Al editar una categoría, se actualizarán todas las pistas que la usen</li> <li class="svelte-1q4kqs3">Cada sala puede tener sus propias categorías personalizadas</li></ul></div></div>'),wu=x("<option> </option>"),qu=x('<div class="message-form svelte-1q4kqs3"><h4 class="svelte-1q4kqs3"> </h4> <div class="form-group svelte-1q4kqs3"><label for="message-language" class="svelte-1q4kqs3">Idioma del mensaje:</label> <select id="message-language" class="svelte-1q4kqs3"></select></div> <div class="form-group svelte-1q4kqs3"><label for="message-text" class="svelte-1q4kqs3">Texto del mensaje:</label> <textarea id="message-text" placeholder="Escribe el mensaje rápido aquí..." rows="3" class="svelte-1q4kqs3"></textarea></div> <div class="form-actions svelte-1q4kqs3"><button class="save-btn svelte-1q4kqs3"><span class="btn-icon save-icon svelte-1q4kqs3"></span> </button> <button class="cancel-btn svelte-1q4kqs3"><span class="btn-icon cancel-icon svelte-1q4kqs3"></span> Cancelar</button></div></div>'),Eu=x("<option> </option>"),xu=x('<div class="message-item svelte-1q4kqs3"><div class="message-content"><span class="message-text svelte-1q4kqs3"> </span></div> <div class="message-actions svelte-1q4kqs3"><button class="edit-btn svelte-1q4kqs3"><span class="btn-icon edit-icon svelte-1q4kqs3"></span> Editar</button> <button class="delete-btn svelte-1q4kqs3"><span class="btn-icon delete-icon svelte-1q4kqs3"></span> Eliminar</button></div></div>'),Cu=x('<div class="no-messages svelte-1q4kqs3"><p> </p></div>'),Tu=x('<div class="messages-tab svelte-1q4kqs3"><div class="messages-header svelte-1q4kqs3"><h3 class="svelte-1q4kqs3">Gestión de Mensajes Rápidos</h3> <button class="create-btn svelte-1q4kqs3"><span class="btn-icon plus-icon svelte-1q4kqs3"></span> Crear Mensaje</button></div> <!> <div class="language-selector svelte-1q4kqs3"><label for="viewing-language">Ver mensajes en:</label> <select id="viewing-language"></select></div> <div class="messages-list"><!> <!></div></div>'),Su=x('<button type="button" class="flag-option svelte-1q4kqs3"><span class="flag-emoji svelte-1q4kqs3"> </span> <span class="flag-name svelte-1q4kqs3"> </span></button>'),Ru=x('<div class="more-results svelte-1q4kqs3"> </div>'),Au=x('<div class="no-results svelte-1q4kqs3">No se encontraron banderas</div>'),Ou=x('<div class="flag-selector-dropdown svelte-1q4kqs3"><div class="flag-search svelte-1q4kqs3"><input type="text" placeholder="Buscar país o código..." class="flag-search-input svelte-1q4kqs3"/></div> <div class="flag-grid svelte-1q4kqs3"><!> <!> <!></div></div>'),Nu=x('<div class="language-form svelte-1q4kqs3"><h4 class="svelte-1q4kqs3"> </h4> <div class="form-row svelte-1q4kqs3"><div class="form-group svelte-1q4kqs3"><label for="language-code" class="svelte-1q4kqs3">Código del idioma:</label> <input id="language-code" type="text" placeholder="es, en, fr..." maxlength="5" class="svelte-1q4kqs3"/></div> <div class="form-group svelte-1q4kqs3"><label for="language-name" class="svelte-1q4kqs3">Nombre del idioma:</label> <input id="language-name" type="text" placeholder="Español, English, Français..." class="svelte-1q4kqs3"/></div> <div class="form-group svelte-1q4kqs3"><label for="language-flag" class="svelte-1q4kqs3">Bandera (emoji):</label> <div class="flag-selector-container svelte-1q4kqs3"><div class="flag-input-wrapper svelte-1q4kqs3"><button type="button" class="flag-display-btn svelte-1q4kqs3" aria-label="Seleccionar bandera de país"><span class="selected-flag svelte-1q4kqs3"> </span> <span class="selector-arrow svelte-1q4kqs3">▼</span></button> <input type="text" placeholder="🇪🇸" maxlength="10" class="flag-manual-input svelte-1q4kqs3"/></div> <!></div></div></div> <div class="form-actions svelte-1q4kqs3"><button class="save-btn svelte-1q4kqs3"><span class="btn-icon save-icon svelte-1q4kqs3"></span> </button> <button class="cancel-btn svelte-1q4kqs3"><span class="btn-icon cancel-icon svelte-1q4kqs3"></span> Cancelar</button></div></div>'),Lu=x('<div class="language-card svelte-1q4kqs3"><div class="language-info svelte-1q4kqs3"><div class="language-flag svelte-1q4kqs3"> </div> <div class="language-details svelte-1q4kqs3"><div class="language-name svelte-1q4kqs3"> </div> <div class="language-code svelte-1q4kqs3"> </div></div></div> <div class="language-actions svelte-1q4kqs3"><button class="edit-btn svelte-1q4kqs3"><span class="btn-icon edit-icon svelte-1q4kqs3"></span> Editar</button> <button class="delete-btn svelte-1q4kqs3"><span class="btn-icon delete-icon svelte-1q4kqs3"></span> Eliminar</button></div></div>'),Pu=x('<div class="empty-state svelte-1q4kqs3"><p class="svelte-1q4kqs3">No hay idiomas configurados</p> <p class="svelte-1q4kqs3">Agrega un idioma para comenzar</p></div>'),Mu=x('<div class="languages-tab svelte-1q4kqs3"><div class="languages-header svelte-1q4kqs3"><h3 class="svelte-1q4kqs3">Gestión de Idiomas del Sistema</h3> <button class="create-btn svelte-1q4kqs3"><span class="btn-icon plus-icon svelte-1q4kqs3"></span> Agregar Idioma</button></div> <!> <div class="languages-list"><div class="languages-grid svelte-1q4kqs3"></div> <!></div> <div class="languages-info svelte-1q4kqs3"><div class="info-card svelte-1q4kqs3"><h4 class="svelte-1q4kqs3">Información Importante</h4> <ul class="svelte-1q4kqs3"><li class="svelte-1q4kqs3">Los idiomas predeterminados (Español, English, Français, Deutsch) no se pueden eliminar</li> <li class="svelte-1q4kqs3">Al eliminar un idioma se borrarán todas las pistas y mensajes asociados</li> <li class="svelte-1q4kqs3">El código del idioma debe ser único y no se puede modificar</li> <li class="svelte-1q4kqs3">Usa códigos estándar ISO 639-1 (ej: es, en, fr, de)</li></ul></div></div></div>'),Bu=x('<div class="settings-overlay svelte-1q4kqs3" role="dialog" aria-modal="true" tabindex="-1"><div class="settings-modal svelte-1q4kqs3" role="document"><div class="settings-header svelte-1q4kqs3"><h2 class="svelte-1q4kqs3">Configuración del Sistema</h2> <button class="close-btn svelte-1q4kqs3" aria-label="Cerrar configuración"><span class="btn-icon close-icon svelte-1q4kqs3"></span></button></div> <div class="settings-content svelte-1q4kqs3"><div class="room-selector svelte-1q4kqs3"><label for="room-select" class="svelte-1q4kqs3">Sala seleccionada:</label> <select id="room-select" class="svelte-1q4kqs3"></select></div> <div class="tab-navigation svelte-1q4kqs3"><button><span class="btn-icon rooms-icon svelte-1q4kqs3"></span> Salas</button> <button><span class="btn-icon hints-icon svelte-1q4kqs3"></span> Pistas</button> <button><span class="btn-icon categories-icon svelte-1q4kqs3"></span> Categorías</button> <button><span class="btn-icon messages-icon svelte-1q4kqs3"></span> Mensajes</button> <button><span class="btn-icon languages-icon svelte-1q4kqs3"></span> Idiomas</button></div> <div class="tab-content svelte-1q4kqs3"><!></div></div></div></div>');function Iu(t,e){Lt(e,!1);const n=N(),s=N();let a=we(e,"isOpen",12,!1),i=we(e,"rooms",8);const o="es",c=Dn();let l=N(0),v=N("rooms"),d=N(!1),g=N(null),m=N(""),y=N([]),p=N({text_es:"",text_en:"",text_fr:"",text_de:"",category:"Pieza Uno"}),k=N({}),S=N(!1),L=N(""),R=N([]),A=N(""),B=N(""),U=N(""),P=N(!1),$=N({es:[],en:[],fr:[],de:[]}),M=N(""),C=N(-1),Q=N("es"),H=N("es"),K=N([{code:"es",name:"Español",flag:"🇪🇸"},{code:"en",name:"English",flag:"🇺🇸"},{code:"fr",name:"Français",flag:"🇫🇷"},{code:"de",name:"Deutsch",flag:"🇩🇪"}]),z=N({code:"",name:"",flag:""}),ae=N(null),le=N(!1),se=N(!1);const fe=[{flag:"🇦🇩",name:"Andorra",code:"ad"},{flag:"🇦🇪",name:"Emiratos Árabes Unidos",code:"ae"},{flag:"🇦🇫",name:"Afganistán",code:"af"},{flag:"🇦🇬",name:"Antigua y Barbuda",code:"ag"},{flag:"🇦🇮",name:"Anguila",code:"ai"},{flag:"🇦🇱",name:"Albania",code:"al"},{flag:"🇦🇲",name:"Armenia",code:"am"},{flag:"🇦🇴",name:"Angola",code:"ao"},{flag:"🇦🇶",name:"Antártida",code:"aq"},{flag:"🇦🇷",name:"Argentina",code:"ar"},{flag:"🇦🇸",name:"Samoa Americana",code:"as"},{flag:"🇦🇹",name:"Austria",code:"at"},{flag:"🇦🇺",name:"Australia",code:"au"},{flag:"🇦🇼",name:"Aruba",code:"aw"},{flag:"🇦🇽",name:"Islas Åland",code:"ax"},{flag:"🇦🇿",name:"Azerbaiyán",code:"az"},{flag:"🇧🇦",name:"Bosnia y Herzegovina",code:"ba"},{flag:"🇧🇧",name:"Barbados",code:"bb"},{flag:"🇧🇩",name:"Bangladesh",code:"bd"},{flag:"🇧🇪",name:"Bélgica",code:"be"},{flag:"🇧🇫",name:"Burkina Faso",code:"bf"},{flag:"🇧🇬",name:"Bulgaria",code:"bg"},{flag:"🇧🇭",name:"Baréin",code:"bh"},{flag:"🇧🇮",name:"Burundi",code:"bi"},{flag:"🇧🇯",name:"Benín",code:"bj"},{flag:"🇧🇱",name:"San Bartolomé",code:"bl"},{flag:"🇧🇲",name:"Bermudas",code:"bm"},{flag:"🇧🇳",name:"Brunéi",code:"bn"},{flag:"🇧🇴",name:"Bolivia",code:"bo"},{flag:"🇧🇶",name:"Caribe Neerlandés",code:"bq"},{flag:"🇧🇷",name:"Brasil",code:"br"},{flag:"🇧🇸",name:"Bahamas",code:"bs"},{flag:"🇧🇹",name:"Bután",code:"bt"},{flag:"🇧🇻",name:"Isla Bouvet",code:"bv"},{flag:"🇧🇼",name:"Botsuana",code:"bw"},{flag:"🇧🇾",name:"Bielorrusia",code:"by"},{flag:"🇧🇿",name:"Belice",code:"bz"},{flag:"🇨🇦",name:"Canadá",code:"ca"},{flag:"🇨🇨",name:"Islas Cocos",code:"cc"},{flag:"🇨🇩",name:"Congo (RDC)",code:"cd"},{flag:"🇨🇫",name:"República Centroafricana",code:"cf"},{flag:"🇨🇬",name:"Congo",code:"cg"},{flag:"🇨🇭",name:"Suiza",code:"ch"},{flag:"🇨🇮",name:"Costa de Marfil",code:"ci"},{flag:"🇨🇰",name:"Islas Cook",code:"ck"},{flag:"🇨🇱",name:"Chile",code:"cl"},{flag:"🇨🇲",name:"Camerún",code:"cm"},{flag:"🇨🇳",name:"China",code:"cn"},{flag:"🇨🇴",name:"Colombia",code:"co"},{flag:"🇨🇷",name:"Costa Rica",code:"cr"},{flag:"🇨🇺",name:"Cuba",code:"cu"},{flag:"🇨🇻",name:"Cabo Verde",code:"cv"},{flag:"🇨🇼",name:"Curazao",code:"cw"},{flag:"🇨🇽",name:"Isla de Navidad",code:"cx"},{flag:"🇨🇾",name:"Chipre",code:"cy"},{flag:"🇨🇿",name:"República Checa",code:"cz"},{flag:"🇩🇪",name:"Alemania",code:"de"},{flag:"🇩🇯",name:"Yibuti",code:"dj"},{flag:"🇩🇰",name:"Dinamarca",code:"dk"},{flag:"🇩🇲",name:"Dominica",code:"dm"},{flag:"🇩🇴",name:"República Dominicana",code:"do"},{flag:"🇩🇿",name:"Argelia",code:"dz"},{flag:"🇪🇨",name:"Ecuador",code:"ec"},{flag:"🇪🇪",name:"Estonia",code:"ee"},{flag:"🇪🇬",name:"Egipto",code:"eg"},{flag:"🇪🇭",name:"Sáhara Occidental",code:"eh"},{flag:"🇪🇷",name:"Eritrea",code:"er"},{flag:"🇪🇸",name:"España",code:"es"},{flag:"🇪🇹",name:"Etiopía",code:"et"},{flag:"🇫🇮",name:"Finlandia",code:"fi"},{flag:"🇫🇯",name:"Fiyi",code:"fj"},{flag:"🇫🇰",name:"Islas Malvinas",code:"fk"},{flag:"🇫🇲",name:"Micronesia",code:"fm"},{flag:"🇫🇴",name:"Islas Feroe",code:"fo"},{flag:"🇫🇷",name:"Francia",code:"fr"},{flag:"🇬🇦",name:"Gabón",code:"ga"},{flag:"🇬🇧",name:"Reino Unido",code:"gb"},{flag:"🇬🇩",name:"Granada",code:"gd"},{flag:"🇬🇪",name:"Georgia",code:"ge"},{flag:"🇬🇫",name:"Guayana Francesa",code:"gf"},{flag:"🇬🇬",name:"Guernsey",code:"gg"},{flag:"🇬🇭",name:"Ghana",code:"gh"},{flag:"🇬🇮",name:"Gibraltar",code:"gi"},{flag:"🇬🇱",name:"Groenlandia",code:"gl"},{flag:"🇬🇲",name:"Gambia",code:"gm"},{flag:"🇬🇳",name:"Guinea",code:"gn"},{flag:"🇬🇵",name:"Guadalupe",code:"gp"},{flag:"🇬🇶",name:"Guinea Ecuatorial",code:"gq"},{flag:"🇬🇷",name:"Grecia",code:"gr"},{flag:"🇬🇸",name:"Georgias del Sur",code:"gs"},{flag:"🇬🇹",name:"Guatemala",code:"gt"},{flag:"🇬🇺",name:"Guam",code:"gu"},{flag:"🇬🇼",name:"Guinea-Bisáu",code:"gw"},{flag:"🇬🇾",name:"Guyana",code:"gy"},{flag:"🇭🇰",name:"Hong Kong",code:"hk"},{flag:"🇭🇲",name:"Islas Heard y McDonald",code:"hm"},{flag:"🇭🇳",name:"Honduras",code:"hn"},{flag:"🇭🇷",name:"Croacia",code:"hr"},{flag:"🇭🇹",name:"Haití",code:"ht"},{flag:"🇭🇺",name:"Hungría",code:"hu"},{flag:"🇮🇩",name:"Indonesia",code:"id"},{flag:"🇮🇪",name:"Irlanda",code:"ie"},{flag:"🇮🇱",name:"Israel",code:"il"},{flag:"🇮🇲",name:"Isla de Man",code:"im"},{flag:"🇮🇳",name:"India",code:"in"},{flag:"🇮🇴",name:"Territorio Británico del Océano Índico",code:"io"},{flag:"🇮🇶",name:"Irak",code:"iq"},{flag:"🇮🇷",name:"Irán",code:"ir"},{flag:"🇮🇸",name:"Islandia",code:"is"},{flag:"🇮🇹",name:"Italia",code:"it"},{flag:"🇯🇪",name:"Jersey",code:"je"},{flag:"🇯🇲",name:"Jamaica",code:"jm"},{flag:"🇯🇴",name:"Jordania",code:"jo"},{flag:"🇯🇵",name:"Japón",code:"jp"},{flag:"🇰🇪",name:"Kenia",code:"ke"},{flag:"🇰🇬",name:"Kirguistán",code:"kg"},{flag:"🇰🇭",name:"Camboya",code:"kh"},{flag:"🇰🇮",name:"Kiribati",code:"ki"},{flag:"🇰🇲",name:"Comoras",code:"km"},{flag:"🇰🇳",name:"San Cristóbal y Nieves",code:"kn"},{flag:"🇰🇵",name:"Corea del Norte",code:"kp"},{flag:"🇰🇷",name:"Corea del Sur",code:"kr"},{flag:"🇰🇼",name:"Kuwait",code:"kw"},{flag:"🇰🇾",name:"Islas Caimán",code:"ky"},{flag:"🇰🇿",name:"Kazajistán",code:"kz"},{flag:"🇱🇦",name:"Laos",code:"la"},{flag:"🇱🇧",name:"Líbano",code:"lb"},{flag:"🇱🇨",name:"Santa Lucía",code:"lc"},{flag:"🇱🇮",name:"Liechtenstein",code:"li"},{flag:"🇱🇰",name:"Sri Lanka",code:"lk"},{flag:"🇱🇷",name:"Liberia",code:"lr"},{flag:"🇱🇸",name:"Lesoto",code:"ls"},{flag:"🇱🇹",name:"Lituania",code:"lt"},{flag:"🇱🇺",name:"Luxemburgo",code:"lu"},{flag:"🇱🇻",name:"Letonia",code:"lv"},{flag:"🇱🇾",name:"Libia",code:"ly"},{flag:"🇲🇦",name:"Marruecos",code:"ma"},{flag:"🇲🇨",name:"Mónaco",code:"mc"},{flag:"🇲🇩",name:"Moldavia",code:"md"},{flag:"🇲🇪",name:"Montenegro",code:"me"},{flag:"🇲🇫",name:"San Martín",code:"mf"},{flag:"🇲🇬",name:"Madagascar",code:"mg"},{flag:"🇲🇭",name:"Islas Marshall",code:"mh"},{flag:"🇲🇰",name:"Macedonia del Norte",code:"mk"},{flag:"🇲🇱",name:"Mali",code:"ml"},{flag:"🇲🇲",name:"Myanmar",code:"mm"},{flag:"🇲🇳",name:"Mongolia",code:"mn"},{flag:"🇲🇴",name:"Macao",code:"mo"},{flag:"🇲🇵",name:"Islas Marianas del Norte",code:"mp"},{flag:"🇲🇶",name:"Martinica",code:"mq"},{flag:"🇲🇷",name:"Mauritania",code:"mr"},{flag:"🇲🇸",name:"Montserrat",code:"ms"},{flag:"🇲🇹",name:"Malta",code:"mt"},{flag:"🇲🇺",name:"Mauricio",code:"mu"},{flag:"🇲🇻",name:"Maldivas",code:"mv"},{flag:"🇲🇼",name:"Malaui",code:"mw"},{flag:"🇲🇽",name:"México",code:"mx"},{flag:"🇲🇾",name:"Malasia",code:"my"},{flag:"🇲🇿",name:"Mozambique",code:"mz"},{flag:"🇳🇦",name:"Namibia",code:"na"},{flag:"🇳🇨",name:"Nueva Caledonia",code:"nc"},{flag:"🇳🇪",name:"Níger",code:"ne"},{flag:"🇳🇫",name:"Isla Norfolk",code:"nf"},{flag:"🇳🇬",name:"Nigeria",code:"ng"},{flag:"🇳🇮",name:"Nicaragua",code:"ni"},{flag:"🇳🇱",name:"Países Bajos",code:"nl"},{flag:"🇳🇴",name:"Noruega",code:"no"},{flag:"🇳🇵",name:"Nepal",code:"np"},{flag:"🇳🇷",name:"Nauru",code:"nr"},{flag:"🇳🇺",name:"Niue",code:"nu"},{flag:"🇳🇿",name:"Nueva Zelanda",code:"nz"},{flag:"🇴🇲",name:"Omán",code:"om"},{flag:"🇵🇦",name:"Panamá",code:"pa"},{flag:"🇵🇪",name:"Perú",code:"pe"},{flag:"🇵🇫",name:"Polinesia Francesa",code:"pf"},{flag:"🇵🇬",name:"Papúa Nueva Guinea",code:"pg"},{flag:"🇵🇭",name:"Filipinas",code:"ph"},{flag:"🇵🇰",name:"Pakistán",code:"pk"},{flag:"🇵🇱",name:"Polonia",code:"pl"},{flag:"🇵🇲",name:"San Pedro y Miquelón",code:"pm"},{flag:"🇵🇳",name:"Islas Pitcairn",code:"pn"},{flag:"🇵🇷",name:"Puerto Rico",code:"pr"},{flag:"🇵🇸",name:"Palestina",code:"ps"},{flag:"🇵🇹",name:"Portugal",code:"pt"},{flag:"🇵🇼",name:"Palau",code:"pw"},{flag:"🇵🇾",name:"Paraguay",code:"py"},{flag:"🇶🇦",name:"Catar",code:"qa"},{flag:"🇷🇪",name:"Reunión",code:"re"},{flag:"🇷🇴",name:"Rumania",code:"ro"},{flag:"🇷🇸",name:"Serbia",code:"rs"},{flag:"🇷🇺",name:"Rusia",code:"ru"},{flag:"🇷🇼",name:"Ruanda",code:"rw"},{flag:"🇸🇦",name:"Arabia Saudí",code:"sa"},{flag:"🇸🇧",name:"Islas Salomón",code:"sb"},{flag:"🇸🇨",name:"Seychelles",code:"sc"},{flag:"🇸🇩",name:"Sudán",code:"sd"},{flag:"🇸🇪",name:"Suecia",code:"se"},{flag:"🇸🇬",name:"Singapur",code:"sg"},{flag:"🇸🇭",name:"Santa Elena",code:"sh"},{flag:"🇸🇮",name:"Eslovenia",code:"si"},{flag:"🇸🇯",name:"Svalbard y Jan Mayen",code:"sj"},{flag:"🇸🇰",name:"Eslovaquia",code:"sk"},{flag:"🇸🇱",name:"Sierra Leona",code:"sl"},{flag:"🇸🇲",name:"San Marino",code:"sm"},{flag:"🇸🇳",name:"Senegal",code:"sn"},{flag:"🇸🇴",name:"Somalia",code:"so"},{flag:"🇸🇷",name:"Surinam",code:"sr"},{flag:"🇸🇸",name:"Sudán del Sur",code:"ss"},{flag:"🇸🇹",name:"Santo Tomé y Príncipe",code:"st"},{flag:"🇸🇻",name:"El Salvador",code:"sv"},{flag:"🇸🇽",name:"San Martín",code:"sx"},{flag:"🇸🇾",name:"Siria",code:"sy"},{flag:"🇸🇿",name:"Esuatini",code:"sz"},{flag:"🇹🇦",name:"Tristán de Acuña",code:"ta"},{flag:"🇹🇨",name:"Islas Turcas y Caicos",code:"tc"},{flag:"🇹🇩",name:"Chad",code:"td"},{flag:"🇹🇫",name:"Territorios Australes Franceses",code:"tf"},{flag:"🇹🇬",name:"Togo",code:"tg"},{flag:"🇹🇭",name:"Tailandia",code:"th"},{flag:"🇹🇯",name:"Tayikistán",code:"tj"},{flag:"🇹🇰",name:"Tokelau",code:"tk"},{flag:"🇹🇱",name:"Timor Oriental",code:"tl"},{flag:"🇹🇲",name:"Turkmenistán",code:"tm"},{flag:"🇹🇳",name:"Túnez",code:"tn"},{flag:"🇹🇴",name:"Tonga",code:"to"},{flag:"🇹🇷",name:"Turquía",code:"tr"},{flag:"🇹🇹",name:"Trinidad y Tobago",code:"tt"},{flag:"🇹🇻",name:"Tuvalu",code:"tv"},{flag:"🇹🇼",name:"Taiwán",code:"tw"},{flag:"🇹🇿",name:"Tanzania",code:"tz"},{flag:"🇺🇦",name:"Ucrania",code:"ua"},{flag:"🇺🇬",name:"Uganda",code:"ug"},{flag:"🇺🇲",name:"Islas Ultramarinas de EE.UU.",code:"um"},{flag:"🇺🇳",name:"Naciones Unidas",code:"un"},{flag:"🇺🇸",name:"Estados Unidos",code:"us"},{flag:"🇺🇾",name:"Uruguay",code:"uy"},{flag:"🇺🇿",name:"Uzbekistán",code:"uz"},{flag:"🇻🇦",name:"Vaticano",code:"va"},{flag:"🇻🇨",name:"San Vicente y las Granadinas",code:"vc"},{flag:"🇻🇪",name:"Venezuela",code:"ve"},{flag:"🇻🇬",name:"Islas Vírgenes Británicas",code:"vg"},{flag:"🇻🇮",name:"Islas Vírgenes de EE.UU.",code:"vi"},{flag:"🇻🇳",name:"Vietnam",code:"vn"},{flag:"🇻🇺",name:"Vanuatu",code:"vu"},{flag:"🇼🇫",name:"Wallis y Futuna",code:"wf"},{flag:"🇼🇸",name:"Samoa",code:"ws"},{flag:"🇽🇰",name:"Kosovo",code:"xk"},{flag:"🇾🇪",name:"Yemen",code:"ye"},{flag:"🇾🇹",name:"Mayotte",code:"yt"},{flag:"🇿🇦",name:"Sudáfrica",code:"za"},{flag:"🇿🇲",name:"Zambia",code:"zm"},{flag:"🇿🇼",name:"Zimbabue",code:"zw"}];let re=N(fe),T=N(""),j=N(!1);const Y=window.location.origin;an(()=>{a()&&(ye(),It())});async function ye(){await ge(),await Se(),await Be()}async function ge(){try{const _=await fetch(`${Y}/api/rooms/${r(l)}/hints`);_.ok&&f(y,await _.json())}catch(_){console.error("Error loading hints:",_)}}async function Se(){try{const _=await fetch(`${Y}/api/rooms/${r(l)}/categories`);_.ok&&f(R,await _.json())}catch(_){console.error("Error loading categories:",_)}}async function Be(){try{for(const _ of["es","en","fr","de"]){const I=await fetch(`${Y}/api/rooms/${r(l)}/messages/${_}`);I.ok&&Ve($,r($)[_]=await I.json())}}catch(_){console.error("Error loading room messages:",_)}}function qt(){a(!1),c("close")}function et(_){f(v,_),_==="languages"?It():ye()}function rn(_){f(g,_),f(m,_.name)}async function on(){if(!(!r(g)||!r(m).trim()))try{f(d,!0),(await fetch(`${Y}/api/rooms/${r(g).id}/name`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r(m).trim()})})).ok&&(Ve(g,r(g).name=r(m).trim()),f(g,null),c("room-updated",r(g)))}catch(_){console.error("Error updating room name:",_)}finally{f(d,!1)}}function ln(){f(g,null),f(m,"")}function q(){f(p,{text_es:"",text_en:"",text_fr:"",text_de:"",category:"Pieza Uno"}),f(k,{}),r(K).forEach(_=>{Ve(k,r(k)[_.code]="")}),f(L,""),f(S,!0)}function ee(_){f(p,{text_es:_.text.es,text_en:_.text.en,text_fr:_.text.fr,text_de:_.text.de,category:_.category}),f(k,{}),r(K).forEach(I=>{Ve(k,r(k)[I.code]=_.text[I.code]||"")}),f(L,_.id),f(S,!0)}function ke(){const _={es:r(p).text_es.trim(),en:r(p).text_en.trim()||r(p).text_es.trim(),fr:r(p).text_fr.trim()||r(p).text_es.trim(),de:r(p).text_de.trim()||r(p).text_es.trim()};return r(K).forEach(I=>{r(k)[I.code]&&r(k)[I.code].trim()?_[I.code]=r(k)[I.code].trim():_[I.code]||(_[I.code]=r(p).text_es.trim())}),_}async function Bt(){if(!r(p).text_es.trim()||!r(p).category.trim()){alert("El texto en español y la categoría son obligatorios");return}try{f(d,!0);const _=r(L)?`${Y}/api/hints/${r(L)}`:`${Y}/api/hints`,I=r(L)?"PUT":"POST";(await fetch(`${Y}/api/rooms/${r(l)}/hints`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:ke(),category:r(p).category.trim()})})).ok&&(await ge(),Oe(),c("hints-updated"))}catch(_){console.error("Error saving hint:",_)}finally{f(d,!1)}}async function Ht(_){if(confirm("¿Estás seguro de que quieres eliminar esta pista?"))try{f(d,!0),(await fetch(`${Y}/api/hints/${_}`,{method:"DELETE"})).ok&&(await ge(),c("hints-updated"))}catch(I){console.error("Error deleting hint:",I)}finally{f(d,!1)}}function Oe(){f(S,!1),f(L,""),f(p,{text_es:"",text_en:"",text_fr:"",text_de:"",category:"Pieza Uno"}),f(k,{})}function Gt(){f(A,""),f(B,""),f(P,!0)}function Vs(_){f(B,_.id),f(U,_.name)}async function ps(){if(!r(A).trim()){alert("El nombre de la categoría es obligatorio");return}try{f(d,!0),(await fetch(`${Y}/api/rooms/${r(l)}/categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r(A).trim()})})).ok&&(await Se(),Et())}catch(_){console.error("Error saving category:",_)}finally{f(d,!1)}}async function gs(_,I){if(!r(U).trim()){alert("El nombre de la categoría es obligatorio");return}try{f(d,!0),(await fetch(`${Y}/api/rooms/${r(l)}/categories/${encodeURIComponent(I)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newName:r(U).trim()})})).ok&&(await Se(),await ge(),Et())}catch(He){console.error("Error updating category:",He)}finally{f(d,!1)}}async function Kt(_){if(confirm(`¿Estás seguro de que quieres eliminar la categoría "${_}"?`))try{f(d,!0);const I=await fetch(`${Y}/api/rooms/${r(l)}/categories/${encodeURIComponent(_)}`,{method:"DELETE"});if(I.ok){const He=await I.json();He.success?await Se():alert(He.message)}}catch(I){console.error("Error deleting category:",I)}finally{f(d,!1)}}function Et(){f(P,!1),f(B,""),f(A,""),f(U,"")}function Fn(){f(M,""),f(C,-1),f(Q,r(H)),f(j,!0)}function Un(_,I){f(C,_),f(Q,I),f(M,r($)[I][_].message),f(j,!1)}function Vn(){f(C,-1),f(M,""),f(j,!1)}async function zs(_,I){const He=r($)[I][_];if(confirm(`¿Estás seguro de que quieres eliminar este mensaje: "${He.message}"?`))try{f(d,!0),(await fetch(`${Y}/api/rooms/${r(l)}/messages/${He.id}`,{method:"DELETE"})).ok&&await Be()}catch(Gn){console.error("Error deleting message:",Gn)}finally{f(d,!1)}}async function Hs(){if(r(M).trim())try{if(f(d,!0),r(C)>=0){const I=r($)[r(Q)][r(C)];await fetch(`${Y}/api/rooms/${r(l)}/messages/${I.id}`,{method:"DELETE"})}(await fetch(`${Y}/api/rooms/${r(l)}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({language:r(Q),message:r(M).trim()})})).ok&&(await Be(),Vn())}catch(_){console.error("Error adding/updating message:",_)}finally{f(d,!1)}}async function It(){try{const _=await fetch(`${Y}/api/languages`);_.ok&&(f(K,await _.json()),ms())}catch(_){console.error("Error loading system languages:",_)}}function ms(){Object.keys(r(k)).length===0&&r(K).forEach(_=>{r(k)[_.code]||Ve(k,r(k)[_.code]="")})}function Gs(){f(z,{code:"",name:"",flag:""}),f(ae,null),f(le,!0)}function Ks(_){console.log("🌐 Starting to edit language:",_),f(ae,_),f(z,{..._}),f(le,!1)}function zn(){f(z,{code:"",name:"",flag:""}),f(ae,null),f(le,!1),f(se,!1),f(T,""),f(re,fe)}function Hn(_){Ve(z,r(z).flag=_),f(se,!1),f(T,""),f(re,fe)}function wn(){f(se,!r(se)),r(se)&&(f(T,""),f(re,fe))}function _s(){if(!r(T).trim())f(re,fe);else{const _=r(T).toLowerCase();f(re,fe.filter(I=>I.name.toLowerCase().includes(_)||I.code.toLowerCase().includes(_)))}}function Ys(_){var I;r(se)&&!((I=_.target)!=null&&I.closest(".flag-selector-container"))&&(f(se,!1),f(T,""),f(re,fe))}async function Ws(){if(!(!r(z).code.trim()||!r(z).name.trim()))try{f(d,!0),r(ae)?(await fetch(`${Y}/api/languages/${r(ae).code}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r(z))})).ok&&(await It(),zn(),Xs()):(await fetch(`${Y}/api/languages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r(z))})).ok&&(await It(),zn(),Xs())}catch(_){console.error("Error saving language:",_)}finally{f(d,!1)}}async function Js(_){if(console.log("🌐 Attempting to delete language:",_),!!confirm("¿Estás seguro de que quieres eliminar este idioma? Esto eliminará todas las pistas y mensajes asociados."))try{f(d,!0),(await fetch(`${Y}/api/languages/${_}`,{method:"DELETE"})).ok&&(await It(),r(v)==="hints"&&await ge(),r(v)==="messages"&&await Be(),Xs())}catch(I){console.error("Error deleting language:",I)}finally{f(d,!1)}}function Xs(){c("languages-changed"),window.dispatchEvent(new CustomEvent("languages-updated")),console.log("🌐 Language change notification sent")}St(()=>me(a()),()=>{a()&&It()}),St(()=>r(l),()=>{r(l)!==void 0&&ye()}),St(()=>r(T),()=>{r(T),_s()}),St(()=>(me(i()),r(l)),()=>{f(n,i().find(_=>_.id===r(l)))}),St(()=>r(y),()=>{f(s,r(y).reduce((_,I)=>(_[I.category]||(_[I.category]=[]),_[I.category].push(I),_),{}))}),js(),zt();var Ja=jt(),Mi=ut(Ja);{var Bi=_=>{var I=Bu(),He=u(I),Gn=u(He),Ii=h(u(Gn),2),$i=h(Gn,2),Xa=u($i),Qa=h(u(Xa),2);F(()=>{r(l),Xn(()=>{i()})}),xe(Qa,5,i,Ee,(Re,Ie)=>{var xt=nu(),cn=u(xt),tt={};F(()=>{D(cn,(r(Ie),b(()=>r(Ie).name))),tt!==(tt=(r(Ie),b(()=>r(Ie).id)))&&(xt.value=(xt.__value=(r(Ie),b(()=>r(Ie).id)))??"")}),w(Re,xt)});var Za=h(Xa,2),Qs=u(Za);let er;var Zs=h(Qs,2);let tr;var ea=h(Zs,2);let nr;var ta=h(ea,2);let sr;var ar=h(ta,2);let rr;var Di=h(Za,2),ji=u(Di);{var Fi=Re=>{var Ie=iu(),xt=h(u(Ie),2);xe(xt,5,i,Ee,(cn,tt)=>{var $t=ru(),un=u($t);{var qn=ht=>{var $e=su(),Ge=u($e),Ae=h(Ge,2),Ke=h(Ae,2);F(()=>Ae.disabled=r(d)),lt(Ge,()=>r(m),pt=>f(m,pt)),E("click",Ae,on),E("click",Ke,ln),w(ht,$e)},Kn=ht=>{var $e=au(),Ge=u($e),Ae=u(Ge),Ke=h(Ge,2);F(()=>D(Ae,(r(tt),b(()=>r(tt).name)))),E("click",Ke,()=>rn(r(tt))),w(ht,$e)};te(un,ht=>{r(g),r(tt),b(()=>r(g)&&r(g).id===r(tt).id)?ht(qn):ht(Kn,!1)})}w(cn,$t)}),w(Re,Ie)},Ui=Re=>{var Ie=jt(),xt=ut(Ie);{var cn=$t=>{var un=pu(),qn=u(un),Kn=h(u(qn),2),ht=h(qn,2);{var $e=Ae=>{var Ke=du(),pt=u(Ke),nt=u(pt),Ye=h(pt,2),st=h(u(Ye),2);F(()=>{r(p),Xn(()=>{r(R)})});var gt=u(st);xe(gt,1,()=>r(R),Ee,(he,O)=>{var V=ou(),G=u(V),Z={};F(()=>{D(G,(r(O),b(()=>r(O).name))),Z!==(Z=(r(O),b(()=>r(O).name)))&&(V.value=(V.__value=(r(O),b(()=>r(O).name)))??"")}),w(he,V)});var We=h(gt);{var Ct=he=>{var O=lu();O.value=O.__value="General",w(he,O)};te(We,he=>{r(R),b(()=>r(R).length===0)&&he(Ct)})}var at=h(Ye,2);xe(at,1,()=>r(K),Ee,(he,O)=>{var V=fu(),G=u(V),Z=u(G),ce=h(G,2);{var je=pe=>{var ie=cu();F(()=>{Wt(ie,"id",`hint-text-${r(O),b(()=>r(O).code)??""}`),Wt(ie,"placeholder",`Texto de la pista en ${r(O),b(()=>r(O).name)??""}`)}),lt(ie,()=>r(p)[`text_${r(O).code}`],ve=>Ve(p,r(p)[`text_${r(O).code}`]=ve)),w(pe,ie)},be=pe=>{var ie=uu();F(()=>{Wt(ie,"id",`hint-text-${r(O),b(()=>r(O).code)??""}`),Wt(ie,"placeholder",`Texto de la pista en ${r(O),b(()=>r(O).name)??""}`)}),lt(ie,()=>r(k)[r(O).code],ve=>Ve(k,r(k)[r(O).code]=ve)),w(pe,ie)};te(ce,pe=>{r(O),b(()=>["es","en","fr","de"].includes(r(O).code))?pe(je):pe(be,!1)})}F(()=>{Wt(G,"for",`hint-text-${r(O),b(()=>r(O).code)??""}`),D(Z,`${r(O),b(()=>r(O).flag)??""} Texto en ${r(O),b(()=>r(O).name)??""} ${r(O),b(()=>r(O).code==="es"?"(obligatorio)":"(opcional)")??""}:`)}),w(he,V)});var Je=h(at,2),De=u(Je),de=h(u(De)),Ne=h(De,2);F(()=>{D(nt,r(L)?"Editar Pista":"Crear Nueva Pista"),De.disabled=r(d),D(de,` ${r(L)?"Actualizar":"Crear"} Pista`)}),Zn(st,()=>r(p).category,he=>Ve(p,r(p).category=he)),E("click",De,Bt),E("click",Ne,Oe),w(Ae,Ke)};te(ht,Ae=>{r(S)&&Ae($e)})}var Ge=h(ht,2);xe(Ge,5,()=>(r(s),b(()=>Object.entries(r(s)))),Ee,(Ae,Ke)=>{var pt=Ur(()=>Br(r(Ke),2));let nt=()=>r(pt)[0],Ye=()=>r(pt)[1];var st=hu(),gt=u(st),We=u(gt),Ct=h(gt,2);xe(Ct,1,Ye,Ee,(at,Je)=>{var De=vu(),de=u(De),Ne=u(de),he=u(Ne),O=h(de,2),V=u(O),G=h(V,2);F(()=>D(he,(r(Je),b(()=>r(Je).text.es)))),E("click",V,()=>ee(r(Je))),E("click",G,()=>Ht(r(Je).id)),w(at,De)}),F(()=>D(We,nt())),w(Ae,st)}),E("click",Kn,q),w($t,un)},tt=$t=>{var un=jt(),qn=ut(un);{var Kn=$e=>{var Ge=ku(),Ae=u(Ge),Ke=u(Ae),pt=u(Ke),nt=h(Ke,2),Ye=h(Ae,2);{var st=de=>{var Ne=gu(),he=h(u(Ne),2),O=h(u(he),2),V=h(he,2),G=u(V),Z=h(G,2);F(ce=>G.disabled=ce,[()=>(r(d),r(A),b(()=>r(d)||!r(A).trim()))]),lt(O,()=>r(A),ce=>f(A,ce)),E("keydown",O,ce=>ce.key==="Enter"&&ps()),E("click",G,ps),E("click",Z,Et),w(de,Ne)};te(Ye,de=>{r(P)&&de(st)})}var gt=h(Ye,2),We=u(gt),Ct=u(We),at=h(We,2);{var Je=de=>{var Ne=mu();w(de,Ne)},De=de=>{var Ne=jt(),he=ut(Ne);xe(he,1,()=>r(R),Ee,(O,V)=>{var G=bu(),Z=u(G);{var ce=be=>{var pe=_u(),ie=u(pe),ve=h(ie,2),Dt=h(ve,2);F(()=>ve.disabled=r(d)),lt(ie,()=>r(U),rt=>f(U,rt)),E("keydown",ie,rt=>rt.key==="Enter"&&gs(r(V).id,r(V).name)),E("click",ve,()=>gs(r(V).id,r(V).name)),E("click",Dt,Et),w(be,pe)},je=be=>{var pe=yu(),ie=u(pe),ve=u(ie),Dt=h(ie,2),rt=u(Dt),mt=h(rt,2);F(()=>D(ve,(r(V),b(()=>r(V).name)))),E("click",rt,()=>Vs(r(V))),E("click",mt,()=>Kt(r(V).name)),w(be,pe)};te(Z,be=>{r(B),r(V),b(()=>r(B)===r(V).id)?be(ce):be(je,!1)})}w(O,G)}),w(de,Ne)};te(at,de=>{r(R),b(()=>r(R).length===0)?de(Je):de(De,!1)})}F(()=>{D(pt,`Gestión de Categorías para ${r(n),b(()=>{var de;return(de=r(n))==null?void 0:de.name})??""}`),D(Ct,`Categorías existentes (${r(R),b(()=>r(R).length)??""})`)}),E("click",nt,Gt),w($e,Ge)},ht=$e=>{var Ge=jt(),Ae=ut(Ge);{var Ke=nt=>{var Ye=Tu(),st=u(Ye),gt=h(u(st),2),We=h(st,2);{var Ct=O=>{var V=qu(),G=u(V),Z=u(G),ce=h(G,2),je=h(u(ce),2);F(()=>{r(Q),Xn(()=>{r(C),r(K)})}),xe(je,5,()=>r(K),Ee,(mt,Xe)=>{var it=wu(),En=u(it),xn={};F(()=>{D(En,`${r(Xe),b(()=>r(Xe).flag)??""} ${r(Xe),b(()=>r(Xe).name)??""}`),xn!==(xn=(r(Xe),b(()=>r(Xe).code)))&&(it.value=(it.__value=(r(Xe),b(()=>r(Xe).code)))??"")}),w(mt,it)});var be=h(ce,2),pe=h(u(be),2),ie=h(be,2),ve=u(ie),Dt=h(u(ve)),rt=h(ve,2);F(()=>{D(Z,r(C)>=0?"Editar Mensaje":"Crear Nuevo Mensaje"),je.disabled=r(C)>=0,ve.disabled=r(d),D(Dt,` ${r(C)>=0?"Actualizar":"Crear"} Mensaje`)}),Zn(je,()=>r(Q),mt=>f(Q,mt)),lt(pe,()=>r(M),mt=>f(M,mt)),E("click",ve,Hs),E("click",rt,Vn),w(O,V)};te(We,O=>{(r(C)>=0||r(j))&&O(Ct)})}var at=h(We,2),Je=h(u(at),2);F(()=>{r(H),Xn(()=>{r(K)})}),xe(Je,5,()=>r(K),Ee,(O,V)=>{var G=Eu(),Z=u(G),ce={};F(()=>{D(Z,`${r(V),b(()=>r(V).flag)??""} ${r(V),b(()=>r(V).name)??""}`),ce!==(ce=(r(V),b(()=>r(V).code)))&&(G.value=(G.__value=(r(V),b(()=>r(V).code)))??"")}),w(O,G)});var De=h(at,2),de=u(De);xe(de,1,()=>(r($),r(H),b(()=>r($)[r(H)])),Ee,(O,V,G)=>{var Z=xu(),ce=u(Z),je=u(ce),be=u(je),pe=h(ce,2),ie=u(pe),ve=h(ie,2);F(()=>D(be,`"${r(V),b(()=>r(V).message)??""}"`)),E("click",ie,()=>Un(G,r(H))),E("click",ve,()=>zs(G,r(H))),w(O,Z)});var Ne=h(de,2);{var he=O=>{var V=Cu(),G=u(V),Z=u(G);F(()=>D(Z,`No hay mensajes en ${r(H)==="es"?"español":r(H)==="en"?"inglés":r(H)==="fr"?"francés":"alemán"}`)),w(O,V)};te(Ne,O=>{r($),r(H),b(()=>r($)[r(H)].length===0)&&O(he)})}E("click",gt,Fn),Zn(Je,()=>r(H),O=>f(H,O)),w(nt,Ye)},pt=nt=>{var Ye=jt(),st=ut(Ye);{var gt=We=>{var Ct=Mu(),at=u(Ct),Je=h(u(at),2),De=h(at,2);{var de=G=>{var Z=Nu(),ce=u(Z),je=u(ce),be=h(ce,2),pe=u(be),ie=h(u(pe),2),ve=h(pe,2),Dt=h(u(ve),2),rt=h(ve,2),mt=h(u(rt),2),Xe=u(mt),it=u(Xe),En=u(it),xn=u(En),Vi=h(it,2),zi=h(Xe,2);{var Hi=_t=>{var ir=Ou(),or=u(ir),Wi=u(or),Ji=h(or,2),lr=u(Ji);xe(lr,1,()=>(r(re),b(()=>r(re).slice(0,50))),Ee,(yt,Fe)=>{var Cn=Su(),ur=u(Cn),eo=u(ur),to=h(ur,2),no=u(to);F(()=>{Wt(Cn,"title",`${r(Fe),b(()=>r(Fe).name)??""} (${r(Fe),b(()=>r(Fe).code)??""})`),D(eo,(r(Fe),b(()=>r(Fe).flag))),D(no,(r(Fe),b(()=>r(Fe).name)))}),E("click",Cn,()=>Hn(r(Fe).flag)),w(yt,Cn)});var cr=h(lr,2);{var Xi=yt=>{var Fe=Ru(),Cn=u(Fe);F(()=>D(Cn,`+${r(re),b(()=>r(re).length-50)??""} más resultados...`)),w(yt,Fe)};te(cr,yt=>{r(re),b(()=>r(re).length>50)&&yt(Xi)})}var Qi=h(cr,2);{var Zi=yt=>{var Fe=Au();w(yt,Fe)};te(Qi,yt=>{r(re),b(()=>r(re).length===0)&&yt(Zi)})}lt(Wi,()=>r(T),yt=>f(T,yt)),w(_t,ir)};te(zi,_t=>{r(se)&&_t(Hi)})}var Gi=h(be,2),ys=u(Gi),Ki=h(u(ys)),Yi=h(ys,2);F(_t=>{D(je,r(ae)?"Editar Idioma":"Agregar Nuevo Idioma"),ie.disabled=r(ae),Wt(it,"aria-expanded",r(se)),D(xn,(r(z),b(()=>r(z).flag||"🏳️"))),ys.disabled=_t,D(Ki,` ${r(ae)?"Actualizar":"Agregar"} Idioma`)},[()=>(r(d),r(z),b(()=>r(d)||!r(z).code.trim()||!r(z).name.trim()))]),lt(ie,()=>r(z).code,_t=>Ve(z,r(z).code=_t)),lt(Dt,()=>r(z).name,_t=>Ve(z,r(z).name=_t)),E("click",it,wn),lt(Vi,()=>r(z).flag,_t=>Ve(z,r(z).flag=_t)),E("click",ys,Ws),E("click",Yi,zn),w(G,Z)};te(De,G=>{(r(le)||r(ae))&&G(de)})}var Ne=h(De,2),he=u(Ne);xe(he,5,()=>r(K),Ee,(G,Z)=>{var ce=Lu(),je=u(ce),be=u(je),pe=u(be),ie=h(be,2),ve=u(ie),Dt=u(ve),rt=h(ve,2),mt=u(rt),Xe=h(je,2),it=u(Xe),En=h(it,2);F(xn=>{D(pe,(r(Z),b(()=>r(Z).flag))),D(Dt,(r(Z),b(()=>r(Z).name))),D(mt,(r(Z),b(()=>r(Z).code))),En.disabled=xn},[()=>(r(Z),b(()=>["es","en","fr","de"].includes(r(Z).code)))]),E("click",it,()=>Ks(r(Z))),E("click",En,()=>Js(r(Z).code)),w(G,ce)});var O=h(he,2);{var V=G=>{var Z=Pu();w(G,Z)};te(O,G=>{r(K),b(()=>r(K).length===0)&&G(V)})}E("click",Je,Gs),w(We,Ct)};te(st,We=>{r(v)==="languages"&&We(gt)},!0)}w(nt,Ye)};te(Ae,nt=>{r(v)==="messages"?nt(Ke):nt(pt,!1)},!0)}w($e,Ge)};te(qn,$e=>{r(v)==="categories"?$e(Kn):$e(ht,!1)},!0)}w($t,un)};te(xt,$t=>{r(v)==="hints"?$t(cn):$t(tt,!1)},!0)}w(Re,Ie)};te(ji,Re=>{r(v)==="rooms"?Re(Fi):Re(Ui,!1)})}F((Re,Ie,xt,cn,tt)=>{er=Te(Qs,1,"tab-btn svelte-1q4kqs3",null,er,Re),tr=Te(Zs,1,"tab-btn svelte-1q4kqs3",null,tr,Ie),nr=Te(ea,1,"tab-btn svelte-1q4kqs3",null,nr,xt),sr=Te(ta,1,"tab-btn svelte-1q4kqs3",null,sr,cn),rr=Te(ar,1,"tab-btn svelte-1q4kqs3",null,rr,tt)},[()=>({active:r(v)==="rooms"}),()=>({active:r(v)==="hints"}),()=>({active:r(v)==="categories"}),()=>({active:r(v)==="messages"}),()=>({active:r(v)==="languages"})]),E("click",Ii,qt),Zn(Qa,()=>r(l),Re=>f(l,Re)),E("click",Qs,()=>et("rooms")),E("click",Zs,()=>et("hints")),E("click",ea,()=>et("categories")),E("click",ta,()=>et("messages")),E("click",ar,()=>et("languages")),E("click",He,yi(function(Re){bi.call(this,e,Re)})),E("click",He,Ys),E("click",I,qt),E("keydown",I,Re=>Re.key==="Escape"&&qt()),w(_,I)};te(Mi,_=>{a()&&_(Bi)})}return w(t,Ja),_i(e,"currentLanguage",o),Pt({currentLanguage:o})}var $u=x('<button><div class="tab-content svelte-ijf6fe"><span class="room-name svelte-ijf6fe"> </span> <span class="room-status svelte-ijf6fe"> </span> <span class="hints-count svelte-ijf6fe"><span class="btn-icon hint-icon svelte-ijf6fe"></span> </span></div></button>'),Du=x('<div class="gamemaster-container svelte-ijf6fe"><header class="header svelte-ijf6fe"><h1 class="svelte-ijf6fe">Game Master - Control de Salas de Escape</h1> <div class="header-controls svelte-ijf6fe"><button class="settings-btn svelte-ijf6fe"><span class="btn-icon settings-icon svelte-ijf6fe"></span> Configuración</button> <!> <button class="tv-btn svelte-ijf6fe"><span class="btn-icon tv-icon svelte-ijf6fe"></span> Vista TV</button> <div><span></span> </div></div></header> <nav class="room-tabs svelte-ijf6fe"></nav> <main class="room-content svelte-ijf6fe"><!></main> <!></div>');function ju(t,e){Lt(e,!1);let n=N(0),s=N([]),a=N("es"),i=N(!1),o=N(!1);const c=window.location.origin;async function l(){try{const T=await fetch(`${c}/api/rooms`);T.ok?(f(s,await T.json()),console.log("✅ Loaded room data from server:",r(s))):(console.error("❌ Failed to load rooms from server"),v())}catch(T){console.error("❌ Error loading rooms:",T),v()}}function v(){f(s,Array.from({length:5},(T,j)=>({id:j,name:`Sala ${j+1}`,timeRemaining:3600,isRunning:!1,hintsRemaining:3,freeHintsCount:0,lastMessage:"",players:[]})))}an(async()=>{await l(),ze.connect(),ze.on("connect",()=>{f(i,!0),console.log("Conectado al servidor")}),ze.on("disconnect",()=>{f(i,!1),console.log("Desconectado del servidor")}),ze.on("room-updated",T=>{f(s,r(s).map(j=>j.id===T.id?T:j))}),ze.on("time-sync",T=>{f(s,r(s).map(j=>j.id===T.roomId?{...j,timeRemaining:T.timeRemaining,isRunning:T.isRunning}:j))})});function d(T){f(n,T)}function g(T){f(s,r(s).map(j=>j.id===T.id?T:j)),ze.emit("update-room",T)}function m(){const T=`${window.location.origin}/tv.html?room=${r(n)}`;window.open(T,"_blank","fullscreen=yes")}function y(){f(o,!0)}function p(){f(o,!1)}function k(){console.log("🌐 Languages changed, updating language selector...")}function S(T){const j=T.detail;f(s,r(s).map(Y=>Y.id===j.id?j:Y))}function L(){}function R(T){console.log("Messages updated:",T.detail)}zt();var A=Du(),B=u(A),U=h(u(B),2),P=u(U),$=h(P,2);tu($,{get currentLanguage(){return r(a)},set currentLanguage(T){f(a,T)},$$legacy:!0});var M=h($,2),C=h(M,2);let Q;var H=u(C);let K;var z=h(H),ae=h(B,2);xe(ae,5,()=>r(s),Ee,(T,j,Y)=>{var ye=$u();let ge;var Se=u(ye),Be=u(Se),qt=u(Be),et=h(Be,2),rn=u(et),on=h(et,2),ln=h(u(on));F((q,ee,ke)=>{ge=Te(ye,1,"room-tab svelte-ijf6fe",null,ge,q),D(qt,r(j).name),D(rn,`${ee??""}:${ke??""}`),D(ln,` ${r(j).hintsRemaining??""}`)},[()=>({active:r(n)===Y,running:r(j).isRunning}),()=>Math.floor(r(j).timeRemaining/60),()=>(r(j).timeRemaining%60).toString().padStart(2,"0")]),E("click",ye,()=>d(Y)),w(T,ye)});var le=h(ae,2),se=u(le);{var fe=T=>{Qc(T,{get currentLanguage(){return r(a)},get room(){return r(s)[r(n)]},set room(j){Ve(s,r(s)[r(n)]=j)},$$events:{"room-update":j=>g(j.detail)},$$legacy:!0})};te(se,T=>{r(s)[r(n)]&&T(fe)})}var re=h(le,2);Iu(re,{get rooms(){return r(s)},get currentLanguage(){return r(a)},get isOpen(){return r(o)},set isOpen(T){f(o,T)},$$events:{close:p,"languages-changed":k,"room-updated":S,"hints-updated":L,"messages-updated":R},$$legacy:!0}),F((T,j)=>{Q=Te(C,1,"connection-status svelte-ijf6fe",null,Q,T),K=Te(H,1,"status-light svelte-ijf6fe",null,K,j),D(z,` ${r(i)?"Conectado":"Desconectado"}`)},[()=>({connected:r(i)}),()=>({connected:r(i)})]),E("click",P,y),E("click",M,m),w(t,A),Pt()}var Fu=x('<main class="app-container svelte-ga9q8b"><!></main>');function Uu(t,e){Lt(e,!1),an(()=>{new URLSearchParams(window.location.search).get("tv")==="true"&&(window.location.href="/tv.html")}),zt();var n=Fu(),s=u(n);ju(s,{}),w(t,n),Pt()}gl(Uu,{target:document.getElementById("app")});
